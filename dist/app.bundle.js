!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=71)}([function(e,t){e.exports=react},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=this;return this.sensorInfo={},this.selectedSensor={},this.paginationInfo={},this.selectedPagination={},this.sortInfo={},this.selectedSort={},{get:function(t,n){return n?e[n][t]:t?e.selectedSensor[t]:e.selectedSensor},set:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sensorChange",a=void 0;switch(r){case"sortChange":e.sortInfo[t.key]=t.value,a=e.sortInfo;break;case"paginationChange":e.selectedPagination[t.key]=t.value,a=t;break;case"sensorChange":default:e.selectedSensor[t.key]=t.value,a=e.selectedSensor}n&&c.emit(r,a)},setSensorInfo:function(t){e.sensorInfo[t.key]=t.value},setSortInfo:function(t){e.sortInfo[t.key]=t.value},setPaginationInfo:function(t){e.paginationInfo[t.key]=t.value}}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),o=n.n(s),i=n(39),l=(n.n(i),n(73));n.d(t,"ResponsiveStory",function(){return l.a}),n.d(t,"sizeValidation",function(){return l.b}),n.d(t,"stepValidation",function(){return l.c}),n.d(t,"validateThreshold",function(){return l.d}),n.d(t,"valueValidation",function(){return l.e}),n.d(t,"validation",function(){return l.f}),n.d(t,"reactiveBaseValidation",function(){return l.g}),n.d(t,"dateFormat",function(){return l.h}),n.d(t,"sensorEmitter",function(){return c}),n.d(t,"WatchForDependencyChange",function(){return h}),n.d(t,"selectedSensor",function(){return d}),n.d(t,"serializeDepends",function(){return y}),n.d(t,"prepareResultData",function(){return m}),n.d(t,"combineStreamData",function(){return v}),n.d(t,"updateStats",function(){return b});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=0,c=new i.EventEmitter,h=function(e,t,n,r,a,s){u+=1,this.random=u;var i={},l=function(e){Object.prototype.hasOwnProperty.call(t,e)||(t[e]="")},h=function(e,a){i[a]&&"object"===p(i[a])?t[a]=JSON.parse(JSON.stringify(i[a])):t[a]=i[a],n(a,r)};this.init=function(){e.forEach(function(e){e.indexOf("channel-options-")>-1||e.indexOf("aggs")>-1||(l(e),"object"===p(i[e])?o()(i[e],t[e])||h(0,e):i[e]!==t[e]&&h(0,e))})},this.start=function(){var t=this;this.sensorListener=c.addListener("sensorChange",function(n){var r=!1;Object.keys(n).forEach(function(t){t.indexOf("channel-options-")<0&&e.indexOf(t)>-1&&(r=!0)}),r&&(i=n,t.init())}),this.paginationListener=c.addListener("paginationChange",function(t){a&&e.indexOf(t.key)>-1&&a(t.value,r)}),this.sortListener=c.addListener("sortChange",function(){s&&s(r)})},this.stop=function(){this.sensorListener&&this.sensorListener.remove(),this.paginationListener&&this.paginationListener.remove(),this.sortListener&&this.sortListener.remove()}},d=new a,f=function(){var e=["and","or","not"];this.serialize=function(t){function n(e){function t(e){i.indexOf(e)<0&&i.push(e)}"string"==typeof e?t(e):e.forEach(function(e){t(e)})}function r(t,r){return Object.keys(t).forEach(function(a){l+=1;var i=s(a,r,t[a],l);o.push(i),e.indexOf(a)<0&&n(a)}),o}function a(e,t){l+=1;var a={parentId:t,componentId:l,leaf:!1,components:null};return"[object Array]"===Object.prototype.toString.call(e)?(a.components=e,a.leaf=!0,n(e)):"string"==typeof e?(a.components=e,a.leaf=!0,n(e)):r(e,t),a}function s(t,n,r,s){var i=!0;if(e.indexOf(t)>-1){var l=a(r,s);i=!1,o.push(l)}return{parentId:n,componentId:s,conjunction:t,components:t,leaf:i}}var o=[],i=[],l=0;return function(){return o=r(t,0),{queries:o,dependsList:i}}()},this.createQuery=function(t,n){function a(e){var t=[],r=null,a=c.filter(function(t){return t.componentId===e.parentId});"[object Array]"===Object.prototype.toString.call(e.components)?e.components.forEach(function(e){n[e]&&(r?r.push(n[e]):(r=[],r.push(n[e])))}):"string"==typeof e.components&&n[e.components]&&(r=n[e.components]),(t=a&&a.length?a[0].query?u(a[0].query,a[0].conjunction,r):p(a[0].conjunction,r):r)&&(c=c.map(function(n){return a.length&&n.componentId===a[0].componentId?n.query=t:0===e.parentId&&n.componentId===e.componentId&&(n.query=t),n}))}function s(e){return!c.filter(function(t){return!t.checked&&t.parentId===e}).length}function o(){var e={},t=null;c.forEach(function(n){0===n.parentId&&("aggs"!==n.conjunction?e=Object.assign(e,n.query):"aggs"===n.conjunction&&(t=n.query))});var n=null;return e&&Object.keys(e).length&&(n={body:{query:{bool:e}}}),t&&(n?n.body.aggs=t:n={body:{aggs:t}}),n}function i(){var e=!1;return c.forEach(function(t){!t.checked&&s(t.componentId)&&(t.checked=!0,e=!0,a(t))}),e?i():o()}function l(e){var t=null;switch(e){case"and":t="must";break;case"or":t="should";break;case"not":t="must_not";break;default:t="must"}return t}function p(t,n){if(!n)return null;var a=n,s=l(t);return e.indexOf(t)>-1&&(a=r({},s,n)),a}function u(e,t,n){if(!n)return null;var a=l(t);return r({},a,(e&&e[a]?e[a]:[]).concat(n))}var c=t.queries.map(function(e){return e.checked=!1,delete e.query,e});return function(){return i()}()}},y=new f,m=function(e,t){var n={err:null,res:null};return e.error?n.err=e:(n.res={mode:e.mode,newData:e.newData,currentData:e.currentData,appliedQuery:e.appliedQuery},t&&(n.res.took=t.took?t.took:0,n.res.total=t.hits&&t.hits.total?t.hits.total:0)),n},v=function(e,t){if(t)if(t._deleted){var n=e.filter(function(e){return e._id!==t._id});e=n}else{var r=e.filter(function(e){return e._id!==t._id});e=r,e.unshift(t)}return e},b=function(e,t){return t&&(t._deleted?e-=1:t._updated||(e+=1)),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"STRING",function(){return r}),n.d(t,"KEYWORD",function(){return a}),n.d(t,"NUMBER",function(){return s}),n.d(t,"BOOLEAN",function(){return o}),n.d(t,"ARRAY",function(){return i}),n.d(t,"OBJECT",function(){return l}),n.d(t,"FUNCTION",function(){return p});var r="string",a="keyword",s="number",o="boolean",i="array",l="object",p="function"},function(e,t){e.exports=classnames},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=n(131),o=n.n(s),i=n(72),l=n(39),p=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),u=n(1),c=function(){function e(){a(this,e),this.emitter=new l.EventEmitter,this.channels={},this.streamRef={},this.queryOptions={},this.appbaseRef={},this.type={},this.app={},this.receive=this.receive.bind(this),this.nextPage=this.nextPage.bind(this),this.paginationChanges=this.paginationChanges.bind(this),this.sortChanges=this.sortChanges.bind(this)}return p(e,[{key:"highlightModify",value:function(e,t){return t&&t.body&&t.body.highlight&&e&&e.hits&&e.hits.hits&&e.hits.hits.length&&(e.hits.hits=e.hits.hits.map(this.highlightItem)),e}},{key:"highlightItem",value:function(e){return e.highlight&&Object.keys(e.highlight).forEach(function(t){var n=e.highlight[t][0];o()(e._source,t,n)}),e}},{key:"receive",value:function(e,t){function n(e,t,n){var r=this;this.streamRef[e]&&this.streamRef[e].stop();var a=JSON.parse(JSON.stringify(t));a.type=this.type[e],a.body&&(delete a.body.from,delete a.body.size,delete a.body.sort),this.streamRef[e]=n.searchStream(a).on("data",function(n){n=r.highlightItem(n,t);var a={mode:"streaming",data:n,appliedQuery:t};s.emitter.emit(e,a)}).on("error",function(e){console.log(e)})}var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this,o=this.channels[t],l=void 0;a?l=i.a(o,a):(l=i.a(o,o.previousSelectedSensor),this.queryOptions[t]=o.previousSelectedSensor["channel-options-"+t]);var p=!0;try{p=!(!l||!Object.keys(l).length)}catch(e){console.log(e)}if(p){var u={startTime:(new Date).getTime(),appliedQuery:l},c=this.appbaseRef[t];if(c){var h=l;h.type="*"===this.type[t]?"":this.type[t],h.preference=this.app[t],function(e){var n=JSON.parse(JSON.stringify(e));n.queryState=!0,s.emitter.emit(t+"-query",n)}(u),c.search(h).on("data",function(e){u.mode="historic",u.data=r.highlightModify(e,u.appliedQuery),s.emitter.emit(t,u);var n=s.queryOptions&&s.queryOptions[t]?s.queryOptions[t]:{};s.emitter.emit("global",{channelResponse:u,react:o.react,queryOptions:n})}).on("error",function(e){var n={appliedQuery:u.appliedQuery,error:e,startTime:u.startTime};s.emitter.emit(t,n)}),o.stream&&n.call(this,t,l,c)}else console.error("appbaseRef is not set for "+t)}else{var d={mode:"historic",startTime:(new Date).getTime(),appliedQuery:l,data:{_shards:{},hits:{hits:[]}}};s.emitter.emit(t,d)}}},{key:"stopStream",value:function(e){this.streamRef[e]&&this.streamRef[e].stop(),this.channels[e]&&this.channels[e].watchDependency&&(this.channels[e].watchDependency.stop(),delete this.channels[e])}},{key:"nextPage",value:function(e){var t=JSON.parse(JSON.stringify(this.channels[e].previousSelectedSensor)),n={size:this.queryOptions[e].size,from:this.queryOptions[e].from+this.queryOptions[e].size};t["channel-options-"+e]=JSON.parse(JSON.stringify(n)),this.queryOptions[e]=n,this.receive("channel-options-"+e,e,t)}},{key:"paginationChanges",value:function(e,t){var n=JSON.parse(JSON.stringify(this.channels[t].previousSelectedSensor)),r={size:this.queryOptions[t].size,from:this.getFrom(e,t)};n["channel-options-"+t]=JSON.parse(JSON.stringify(r)),this.queryOptions[t]=r,this.receive("channel-options-"+t,t,n)}},{key:"getFrom",value:function(e,t){return 1!==e?this.queryOptions[t].size*(e-1)+1:0}},{key:"sortChanges",value:function(e){this.receive("channel-options-"+e,e)}},{key:"create",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"reactivebase",p=btoa(JSON.stringify(n)),c={size:a,from:s};this.queryOptions[p]=c,this.type[p]=t,this.app[p]=l,this.appbaseRef[p]=e,n["channel-options-"+p]=c;var h=r({},"channel-options-"+p,c),d={key:"channel-options-"+p,value:c},f=u.serializeDepends.serialize(n);return u.selectedSensor.set(d),p in this.channels&&i===this.channels[p].stream||(this.channels[p]={react:n,size:a,from:s,stream:i,previousSelectedSensor:h,serializeDepends:f,watchDependency:new u.WatchForDependencyChange(f.dependsList,h,this.receive,p,this.paginationChanges,this.sortChanges)},this.channels[p].watchDependency.start()),setTimeout(function(){"aggs"in n&&o.receive("aggs",p)},100),{channelId:p,emitter:this.emitter}}}]),e}(),h=new c;t.a=h},function(e,t,n){"use strict";function r(e){return s.a.createElement("div",{className:"rbc rbc-initialloader"},e.defaultText)}var a=n(0),s=n.n(a);t.a=r,r.propTypes={defaultText:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element])},r.defaultProps={defaultText:"Initializing data.."}},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n(34);e.exports=r},function(e,t,n){function r(e,t){return a(e,t)}var a=n(14);e.exports=r},function(e,t){e.exports=react-select},function(e,t,n){"use strict";function r(e){return s.a.createElement("div",{className:"rbc rbc-noresults"},e.defaultText)}var a=n(0),s=n.n(a);t.a=r,r.propTypes={defaultText:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element])},r.defaultProps={defaultText:"No results found."}},function(e,t,n){"use strict";function r(e){return e.onResultStats?s.a.createElement("div",{className:"rbc rbc-resultstats col s12 col-xs-12"},e.onResultStats(e.total,e.took)):s.a.createElement("div",{className:"rbc rbc-resultstats col s12 col-xs-12"},e.total," results found in ",e.took," ms")}var a=n(0),s=n.n(a);t.a=r,r.propTypes={onResultStats:s.a.PropTypes.func}},function(e,t,n){"use strict";function r(e){var t=!0,n=s.a.createElement("a",{href:"https://appbase.io/",target:"_blank",rel:"noopener noreferrer",className:"rbc rbc-poweredby"},s.a.createElement("img",{className:"rbc-img-responsive rbc-poweredby-dark",src:"https://cdn.rawgit.com/appbaseio/cdn/master/appbase/logos/rbc-dark-logo.svg",alt:"Appbase dark"}),s.a.createElement("img",{className:"rbc-img-responsive rbc-poweredby-light",src:"https://cdn.rawgit.com/appbaseio/cdn/master/appbase/logos/rbc-logo.svg",alt:"Poweredby appbase"}));return e.container&&(t=(o("."+e.container).height()||0)>300),t?n:null}var a=n(0),s=n.n(a);t.a=r;var o=n(20)},function(e,t,n){function r(e,t,n,o,i){return e===t||(null==e||null==t||!s(e)&&!s(t)?e!==e&&t!==t:a(e,t,n,o,r,i))}var a=n(88),s=n(126);e.exports=r},function(e,t,n){function r(e,t){return a(e)?e:s(e,t)?[e]:o(i(e))}var a=n(4),s=n(16),o=n(120),i=n(132);e.exports=r},function(e,t,n){function r(e,t){if(a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}var a=n(4),s=n(19),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(9),l=n.n(i),p=n(0),u=n.n(p),c=n(10),h=n.n(c),d=n(3),f=n.n(d),y=n(5),m=n(6),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(1),g=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[],value:"",rawData:{hits:{hits:[]}}},n.sortObj={aggSort:n.props.sortBy},n.selectAll=!1,n.channelId=null,n.channelListener=null,n.previousSelectedSensor={},n.defaultSelected=n.props.defaultSelected,n.handleChange=n.handleChange.bind(n),n.type=n.props.multipleSelect?"Terms":"Term",n.customQuery=n.customQuery.bind(n),n.renderOption=n.renderOption.bind(n),n}return o(t,e),v(t,[{key:"componentDidMount",value:function(){this.size=this.props.size,this.setQueryInfo(),this.createChannel(!0)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.items;e.selectAllLabel!==this.props.selectAllLabel&&(this.props.selectAllLabel&&t.shift(),t.unshift({label:e.selectAllLabel,value:e.selectAllLabel}),this.setState({items:t}))}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(e.props.multipleSelect){if(!l()(e.defaultSelected,e.props.defaultSelected)){e.defaultSelected=e.props.defaultSelected;var t=e.state.items.filter(function(t){return e.defaultSelected.indexOf(t.value)>-1});t.length&&setTimeout(e.handleChange.bind(e,t),1e3)}}else if(e.defaultSelected!==e.props.defaultSelected){e.defaultSelected=e.props.defaultSelected;var n=e.state.items.filter(function(t){return t.value===e.defaultSelected});n.length&&setTimeout(e.handleChange.bind(e,n),1e3)}e.sortBy!==e.props.sortBy&&(e.sortBy=e.props.sortBy,e.handleSortSelect()),e.size!==e.props.size&&(e.size=e.props.size,e.removeChannel(),e.createChannel())},300)}},{key:"componentWillUnmount",value:function(){this.removeChannel()}},{key:"removeChannel",value:function(){this.channelId&&y.a.stopStream(this.channelId),this.channelListener&&this.channelListener.remove(),this.loadListener&&this.loadListener.remove()}},{key:"customQuery",value:function(e){return this.selectAll?{exists:{field:[this.props.appbaseField]}}:e?r({},this.type,r({},this.props.appbaseField,e)):void 0}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};b.selectedSensor.setSensorInfo(e)}},{key:"includeAggQuery",value:function(){var e={key:this.props.componentId+"-sort",value:this.sortObj};b.selectedSensor.setSortInfo(e)}},{key:"handleSortSelect",value:function(){this.sortObj={aggSort:this.props.sortBy};var e={key:this.props.componentId+"-sort",value:this.sortObj};this.props.onValueChange&&this.props.onValueChange(e.value),b.selectedSensor.set(e,!0,"sortChange")}},{key:"createChannel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.react?this.props.react:{};n.aggs={key:this.props.appbaseField,sort:this.props.sortBy,size:this.props.size,sortRef:this.props.componentId+"-sort"},n&&n.and&&"string"==typeof n.and?n.and=[n.and]:n.and=n.and?n.and:[],n.and.push(this.props.componentId+"-sort"),n.and.push("dropdownListChanges"),this.includeAggQuery();var r=y.a.create(this.context.appbaseRef,this.context.type,n);this.channelId=r.channelId,this.channelListener=r.emitter.addListener(r.channelId,function(t){if(t.error&&e.setState({queryStart:!1}),t.appliedQuery){var n=t.data,r=void 0;"streaming"===t.mode?(r=e.state.rawData,r.hits.hits.push(t.data)):"historic"===t.mode&&(r=n),e.setState({queryStart:!1,rawData:r}),e.setData(r)}}),t&&setTimeout(function(){var e={key:"dropdownListChanges",value:""};b.selectedSensor.set(e,!0)},100),this.listenLoadingChannel(r)}},{key:"listenLoadingChannel",value:function(e){var t=this;this.loadListener=e.emitter.addListener(e.channelId+"-query",function(e){e.appliedQuery&&t.setState({queryStart:e.queryState})})}},{key:"setData",value:function(e){e.aggregations&&e.aggregations[this.props.appbaseField]&&e.aggregations[this.props.appbaseField].buckets&&this.addItemsToList(e.aggregations[this.props.appbaseField].buckets)}},{key:"renderOption",value:function(e){return u.a.createElement("span",{key:e.value},e.value," ",this.props.showCount&&e.count?u.a.createElement("span",{className:"rbc-count"},e.count):null)}},{key:"addItemsToList",value:function(e){var t=this;if(e=e.map(function(e){return e.label=e.key.toString(),e.value=e.key.toString(),e.count=null,t.props.showCount&&(e.count=e.doc_count),e}),this.props.selectAllLabel&&e.unshift({label:this.props.selectAllLabel,value:this.props.selectAllLabel}),this.setState({items:e}),this.defaultSelected)if(this.props.multipleSelect){var n=this.state.items.filter(function(e){return t.defaultSelected.indexOf(e.value)>-1});n.length&&this.handleChange(n)}else{var r=this.state.items.filter(function(e){return e.value===t.defaultSelected});r.length&&this.handleChange(r[0])}}},{key:"handleChange",value:function(e){var t=void 0;this.selectAll=!1,this.props.multipleSelect?(t=[],e.map(function(e){t.push(e.value)}),this.props.selectAllLabel&&t.indexOf(this.props.selectAllLabel)>-1?(t=this.props.selectAllLabel,this.selectAll=!0):t=t.join()):(t=e.value,this.props.selectAllLabel&&t===this.props.selectAllLabel&&(this.selectAll=!0)),this.setState({value:t}),this.setValue(t,!0)}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.multipleSelect&&(e=e.split(","));var n={key:this.props.componentId,value:e};b.selectedSensor.set(n,t)}},{key:"render",value:function(){var e=null;this.props.title&&(e=u.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=f()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder,"rbc-multidropdownlist":this.props.multipleSelect,"rbc-singledropdownlist":!this.props.multipleSelect,"rbc-count-active":this.props.showCount,"rbc-count-inactive":!this.props.showCount,"rbc-initialloader-active":this.props.initialLoader,"rbc-initialloader-inactive":!this.props.initialLoader});return u.a.createElement("div",{className:"rbc col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},u.a.createElement("div",{className:"row"},e,u.a.createElement("div",{className:"col s12 col-xs-12"},this.state.items.length?u.a.createElement(h.a,{options:this.state.items,clearable:!1,value:this.state.value,onChange:this.handleChange,multi:this.props.multipleSelect,cache:!1,placeholder:this.props.placeholder,optionRenderer:this.renderOption,searchable:!0}):null)),this.props.initialLoader&&this.state.queryStart?u.a.createElement(m.a,{defaultText:this.props.initialLoader}):null)}}]),t}(p.Component);t.a=g,g.propTypes={componentId:u.a.PropTypes.string.isRequired,appbaseField:u.a.PropTypes.string.isRequired,title:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),size:b.sizeValidation,multipleSelect:u.a.PropTypes.bool,showCount:u.a.PropTypes.bool,sortBy:u.a.PropTypes.oneOf(["asc","desc","count"]),placeholder:u.a.PropTypes.string,selectAllLabel:u.a.PropTypes.string,initialLoader:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),defaultSelected:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.array]),customQuery:u.a.PropTypes.func,react:u.a.PropTypes.object,onValueChange:u.a.PropTypes.func,componentStyle:u.a.PropTypes.object},g.defaultProps={showCount:!0,sortBy:"count",size:100,title:null,placeholder:"Select...",selectAllLabel:null},g.contextTypes={appbaseRef:u.a.PropTypes.any.isRequired,type:u.a.PropTypes.any.isRequired}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(3),u=n.n(p),c=n(64),h=n(65),d=n(5),f=n(69),y=n(6),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),b=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[],storedItems:[],rawData:{hits:{hits:[]}},queryStart:!1,defaultSelectAll:!1},n.sortObj={aggSort:n.props.sortBy},n.previousSelectedSensor={},n.channelId=null,n.channelListener=null,n.defaultSelected=n.props.defaultSelected,n.handleSelect=n.handleSelect.bind(n),n.handleRemove=n.handleRemove.bind(n),n.filterBySearch=n.filterBySearch.bind(n),n.selectAll=n.selectAll.bind(n),n.type=n.props.multipleSelect?"Terms":"Term",n.customQuery=n.customQuery.bind(n),n.defaultCustomQuery=n.defaultCustomQuery.bind(n),n}return o(t,e),m(t,[{key:"componentDidMount",value:function(){this.size=this.props.size,this.setQueryInfo(),this.handleSelect(""),this.createChannel(!0)}},{key:"customQuery",value:function(e){return(this.props.customQuery?this.props.customQuery:this.defaultCustomQuery)(e,this.state.selectAll)}},{key:"defaultCustomQuery",value:function(e,t){var n=null;if(t)n={exists:{field:[this.props.appbaseField]}};else if(e){var a=r({},this.type,r({},this.props.appbaseField,e));n=this.props.multipleSelect?e.length?a:null:a}return n}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(e.defaultSelected!==e.props.defaultSelected){e.defaultSelected=e.props.defaultSelected;var t=e.state.items;t=t.map(function(t){return t.key=t.key.toString(),t.status=!!(e.defaultSelected&&e.defaultSelected.indexOf(t.key)>-1||e.selectedValue&&e.selectedValue.indexOf(t.key)>-1),t}),e.setState({items:t,storedItems:t}),setTimeout(e.handleSelect.bind(e,e.defaultSelected),1e3)}e.sortBy!==e.props.sortBy&&(e.sortBy=e.props.sortBy,e.handleSortSelect()),e.size!==e.props.size&&(e.size=e.props.size,e.removeChannel(),e.createChannel())},300)}},{key:"componentWillUnmount",value:function(){this.removeChannel()}},{key:"removeChannel",value:function(){this.channelId&&d.a.stopStream(this.channelId),this.channelListener&&this.channelListener.remove(),this.loadListener&&this.loadListener.remove()}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.customQuery}};v.selectedSensor.setSensorInfo(e)}},{key:"includeAggQuery",value:function(){var e={key:this.props.componentId+"-sort",value:this.sortObj};v.selectedSensor.setSortInfo(e)}},{key:"handleSortSelect",value:function(){this.sortObj={aggSort:this.props.sortBy};var e={key:this.props.componentId+"-sort",value:this.sortObj};v.selectedSensor.set(e,!0,"sortChange")}},{key:"createChannel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.react?this.props.react:{};n.aggs={key:this.props.appbaseField,sort:this.props.sortBy,size:this.props.size,sortRef:this.props.componentId+"-sort"},n&&n.and&&"string"==typeof n.and?n.and=[n.and]:n.and=n.and?n.and:[],n.and.push(this.props.componentId+"-sort"),n.and.push("nativeListChanges"),this.includeAggQuery();var r=d.a.create(this.context.appbaseRef,this.context.type,n);this.channelId=r.channelId,this.channelListener=r.emitter.addListener(this.channelId,function(t){if(t.error&&e.setState({queryStart:!1}),t.appliedQuery){var n=t.data,r=void 0;"streaming"===t.mode?(r=e.state.rawData,r.hits.hits.push(t.data)):"historic"===t.mode&&(r=n),e.setState({queryStart:!1,rawData:r}),e.setData(r)}}),t&&setTimeout(function(){var e={key:"nativeListChanges",value:""};v.selectedSensor.set(e,!0)},100),this.listenLoadingChannel(r)}},{key:"listenLoadingChannel",value:function(e){var t=this;this.loadListener=e.emitter.addListener(e.channelId+"-query",function(e){e.appliedQuery&&t.setState({queryStart:e.queryState})})}},{key:"setData",value:function(e){e.aggregations&&e.aggregations[this.props.appbaseField]&&e.aggregations[this.props.appbaseField].buckets&&this.addItemsToList(e.aggregations[this.props.appbaseField].buckets)}},{key:"addItemsToList",value:function(e){var t=this;e=e.map(function(e){return e.key=e.key.toString(),e.status=!!(t.selectedValue&&t.selectedValue.indexOf(e.key)>-1),e}),this.setState({items:e,storedItems:e})}},{key:"handleSelect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.state.selectAll&&!t&&this.setState({selectAll:!1}),this.setValue(e,!0)}},{key:"handleRemove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setValue(e,t)}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={key:this.props.componentId,value:e};if(this.selectedValue=e,this.props.multipleSelect){var r=this.state.items.map(function(t){return e&&e.indexOf(t.key)>-1?t.status=!0:t.status=!1,t});this.setState({items:r})}this.props.onValueChange&&this.props.onValueChange(n.value),v.selectedSensor.set(n,t)}},{key:"selectAll",value:function(e,t,n){var r=this.state.items.map(function(t){return t.status=e,t});e&&(this.selectedValue=t),this.setState({items:r,storedItems:r,defaultSelectAll:e,selectAll:e},n)}},{key:"filterBySearch",value:function(e){if(e){var t=this.state.storedItems.map(function(t){return t.visible=!!(t.key&&t.key.toLowerCase().indexOf(e.toLowerCase())>-1),t});this.setState({items:t})}else{var n=this.state.storedItems.map(function(e){return e.visible=!0,e});this.setState({items:n})}}},{key:"render",value:function(){var e=void 0,t=null,n=null;e=this.props.multipleSelect?l.a.createElement(c.a,{items:this.state.items,onSelect:this.handleSelect,onRemove:this.handleRemove,showCount:this.props.showCount,selectAll:this.selectAll,defaultSelected:this.props.defaultSelected,selectAllLabel:this.props.selectAllLabel,selectAllValue:this.state.selectAll}):l.a.createElement(h.a,{items:this.state.items,onSelect:this.handleSelect,onRemove:this.handleRemove,showCount:this.props.showCount,defaultSelected:this.props.defaultSelected,selectAllLabel:this.props.selectAllLabel,selectAll:this.selectAll}),this.props.showSearch&&(t=l.a.createElement(f.a,{placeholder:this.props.placeholder,changeCallback:this.filterBySearch})),this.props.title&&(n=l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var r=u()({"rbc-search-active":this.props.showSearch,"rbc-search-inactive":!this.props.showSearch,"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder,"rbc-singlelist":!this.props.multipleSelect,"rbc-multilist":this.props.multipleSelect,"rbc-initialloader-active":this.props.initialLoader,"rbc-initialloader-inactive":!this.props.initialLoader});return l.a.createElement("div",{className:"rbc col s12 col-xs-12 card thumbnail "+r,style:this.props.componentStyle},n,t,e,this.props.initialLoader&&this.state.queryStart?l.a.createElement(y.a,{defaultText:this.props.initialLoader}):null)}}]),t}(i.Component);t.a=b,b.propTypes={appbaseField:l.a.PropTypes.string.isRequired,componentId:l.a.PropTypes.string.isRequired,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),size:v.sizeValidation,showCount:l.a.PropTypes.bool,multipleSelect:l.a.PropTypes.bool,sortBy:l.a.PropTypes.oneOf(["asc","desc","count"]),showSearch:l.a.PropTypes.bool,placeholder:l.a.PropTypes.string,selectAllLabel:l.a.PropTypes.string,customQuery:l.a.PropTypes.func,initialLoader:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),defaultSelected:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.number,l.a.PropTypes.array]),react:l.a.PropTypes.object,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object},b.defaultProps={showCount:!0,multipleSelect:!0,sortBy:"count",size:100,showSearch:!1,title:null,placeholder:"Search",selectAllLabel:null,componentStyle:{}},b.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired}},function(e,t,n){function r(){if(!arguments.length)return[];var e=arguments[0];return a(e)?e:[e]}var a=n(4);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(113),s=n(114),o=n(115),i=n(116),l=n(117);r.prototype.clear=a,r.prototype.delete=s,r.prototype.get=o,r.prototype.has=i,r.prototype.set=l,e.exports=r},function(e,t,n){function r(e,t){t=a(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[s(t[n++])];return n&&n==r?e:void 0}var a=n(15),s=n(7);e.exports=r},function(e,t){function n(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?s(e[0],e[1]):a(e):l(e)}var a=n(91),s=n(92),o=n(17),i=n(4),l=n(130);e.exports=r},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&a(e,t,0)>-1}var a=n(26);e.exports=r},function(e,t,n){function r(e,t,n){t=a(t,e);for(var r=-1,u=t.length,c=!1;++r<u;){var h=p(t[r]);if(!(c=null!=e&&n(e,h)))break;e=e[h]}return c||++r!=u?c:!!(u=null==e?0:e.length)&&l(u)&&i(h,u)&&(o(e)||s(e))}var a=n(15),s=n(123),o=n(4),i=n(30),l=n(37),p=n(7);e.exports=r},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e){return e===e&&!a(e)}var a=n(18);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?void 0:a(e,t);return void 0===r?n:r}var a=n(25);e.exports=r},function(e,t,n){function r(e){return null!=e&&s(e.length)&&!a(e)}var a=n(125),s=n(37);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){var r=n(33),a=r(Object.keys,Object);e.exports=a},function(e,t){e.exports=fbemitter},function(e,t){e.exports=moment},function(e,t){e.exports=react-dates},function(e,t){e.exports=react-moment-proptypes},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(4),i=n.n(o),l=n(0),p=n.n(l),u=n(3),c=n.n(u),h=n(5),d=n(13),f=n(6),y=n(11),m=n(12),v=n(2),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(1),S=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={markers:[],query:{},rawData:[],resultMarkup:[],isLoading:!1,queryStart:!1,resultStats:{resultFound:!1,total:0,took:0},showPlaceholder:!0},n.channelId=null,n.channelListener=null,n.queryStartTime=0,n.appliedQuery={},n}return s(t,e),b(t,[{key:"setMarkersData",value:function(e){return e||[]}},{key:"streamDataModify",value:function(e,t){if(t)if(t.stream=!0,t.streamStart=new Date,t._deleted){var n=e.filter(function(e){return e._id!==t._id});e=n}else{var r=e.filter(function(e){return e._id!==t._id});e=r,e.unshift(t)}return e}},{key:"defaultonAllData",value:function(e){var t=null;return e&&e.appliedQuery&&(t=p.a.createElement("div",{className:"row",style:{marginTop:"60px"}},p.a.createElement("pre",{className:"pull-left"},JSON.stringify(e.newData,null,4)))),t}},{key:"componentDidMount",value:function(){this.streamProp=this.props.stream,this.initialize()}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){e.streamProp!==e.props.stream&&(e.streamProp=e.props.stream,e.removeChannel(),e.initialize(!0)),e.size!==e.props.size&&(e.size=e.props.size,e.removeChannel(),e.initialize(!0))},300)}},{key:"componentWillUnmount",value:function(){this.removeChannel()}},{key:"createChannel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.react?this.props.react:{};n&&n.and?"string"==typeof n.and&&(n.and=[n.and]):n.and=[],n.and.push("streamChanges"),this.sortObj&&this.enableSort(n);var r=h.a.create(this.context.appbaseRef,this.context.type,n,this.props.size,this.props.from,this.props.stream,this.context.app);if(this.channelId=r.channelId,this.channelListener=r.emitter.addListener(r.channelId,function(t){if(t.error&&t.startTime>e.queryStartTime&&(e.setState({queryStart:!1,showPlaceholder:!1}),e.props.onAllData)){var n=g.prepareResultData(t);e.props.onAllData(n.res,n.err)}if(t.appliedQuery)if("historic"===t.mode&&t.startTime>e.queryStartTime){var r=!(!t.appliedQuery||!t.data||t.data.error||t.data.hits&&t.data.hits.total),a={resultFound:!!(t.appliedQuery&&t.data&&!t.data.error&&t.data.hits&&t.data.hits.total)};t.appliedQuery&&t.data&&!t.data.error&&(a.total=t.data.hits.total,a.took=t.data.took),e.setState({queryStart:!1,visibleNoResults:r,resultStats:a,showPlaceholder:!1}),e.afterChannelResponse(t)}else"streaming"===t.mode&&(e.afterChannelResponse(t),e.updateResultStats(t.data));else e.setState({showPlaceholder:!0})}),this.listenLoadingChannel(r),t){var a={key:"streamChanges",value:""};g.selectedSensor.set(a,!0)}}},{key:"updateResultStats",value:function(e){var t=this.state.resultStats;t.total=g.updateStats(t.total,e),this.setState({resultStats:t})}},{key:"listenLoadingChannel",value:function(e){var t=this;this.loadListener=e.emitter.addListener(e.channelId+"-query",function(e){e.appliedQuery&&t.setState({queryStart:e.queryState})})}},{key:"afterChannelResponse",value:function(e){var t=this,n=e.data,r=void 0,a=[],s=[];if(this.streamFlag=!1,"streaming"===e.mode)this.channelMethod="streaming",a=n,a.stream=!0,s=this.state.currentData,this.streamFlag=!0,r=this.setMarkersData(void 0);else if("historic"===e.mode){this.queryStartTime=e.startTime,this.channelMethod="historic",a=n.hits&&n.hits.hits?n.hits.hits:[];var o=this.normalizeCurrentData(e,this.state.currentData,a);a=o.newData,s=o.currentData}this.setState({rawData:void 0,newData:a,currentData:s,markersData:r,isLoading:!1},function(){e.allMarkers=void 0;var n=JSON.parse(JSON.stringify(e));n.newData=t.state.newData,n.currentData=t.state.currentData,delete n.data,n=g.prepareResultData(n,e.data);var r=t.props.onAllData?t.props.onAllData(n.res,n.err):t.defaultonAllData(n.res,n.err);t.setState({resultMarkup:r,currentData:t.combineCurrentData(a)})})}},{key:"normalizeCurrentData",value:function(e,t,n){var r=JSON.parse(JSON.stringify(e.appliedQuery)),a=JSON.stringify(r)===JSON.stringify(this.appliedQuery)?t||[]:[];return a.length?n=n.filter(function(e){var t=!0;return a.forEach(function(n){e._id+"-"+e._type==n._id+"-"+n._type&&(t=!1)}),t}):this.appliedQuery=r,{currentData:a,newData:n}}},{key:"combineCurrentData",value:function(e){return i()(e)?this.state.currentData.concat(e):this.streamDataModify(this.state.currentData,e)}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.createChannel(e)}},{key:"removeChannel",value:function(){this.channelId&&(h.a.stopStream(this.channelId),this.channelId=null),this.channelListener&&this.channelListener.remove(),this.loadListener&&this.loadListener.remove()}},{key:"render",value:function(){var e=null,t=null,n=c()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder,"rbc-stream-active":this.props.stream,"rbc-stream-inactive":!this.props.stream,"rbc-initialloader-active":this.props.initialLoader,"rbc-initialloader-inactive":!this.props.initialLoader,"rbc-resultstats-active":this.props.showResultStats,"rbc-resultstats-inactive":!this.props.showResultStats,"rbc-noresults-active":this.props.noResults,"rbc-noresults-inactive":!this.props.noResults});return this.props.title&&(e=p.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title)),this.props.placeholder&&(t=p.a.createElement("div",{className:"rbc-placeholder col s12 col-xs-12"},this.props.placeholder)),p.a.createElement("div",{className:"rbc-reactiveelement-container"},p.a.createElement("div",{className:"rbc rbc-reactiveelement card thumbnail "+n,style:this.props.componentStyle},e,this.state.resultStats&&this.state.resultStats.resultFound&&this.props.showResultStats?p.a.createElement(m.a,{onResultStats:this.props.onResultStats,took:this.state.resultStats.took,total:this.state.resultStats.total}):null,this.state.resultMarkup,this.state.showPlaceholder?t:null),this.props.noResults&&this.state.visibleNoResults?p.a.createElement(y.a,{defaultText:this.props.noResults.text}):null,this.props.initialLoader&&this.state.queryStart?p.a.createElement(f.a,{defaultText:this.props.initialLoader.text}):null,p.a.createElement(d.a,{container:"rbc-reactiveelement-container"}))}}]),t}(l.Component);t.a=S,S.propTypes={componentId:p.a.PropTypes.string,title:p.a.PropTypes.oneOfType([p.a.PropTypes.string,p.a.PropTypes.element]),from:g.validation.resultListFrom,onAllData:p.a.PropTypes.func,size:g.sizeValidation,stream:p.a.PropTypes.bool,componentStyle:p.a.PropTypes.object,initialLoader:p.a.PropTypes.oneOfType([p.a.PropTypes.string,p.a.PropTypes.element]),noResults:p.a.PropTypes.oneOfType([p.a.PropTypes.string,p.a.PropTypes.element]),showResultStats:p.a.PropTypes.bool,onResultStats:p.a.PropTypes.func,react:p.a.PropTypes.object,placeholder:p.a.PropTypes.oneOfType([p.a.PropTypes.string,p.a.PropTypes.element])},S.defaultProps={from:0,size:20,stream:!1,showResultStats:!0,componentStyle:{}},S.contextTypes={appbaseRef:p.a.PropTypes.any.isRequired,type:p.a.PropTypes.any.isRequired,app:p.a.PropTypes.any.isRequired},S.types={componentId:v.STRING,title:v.STRING,react:v.OBJECT,from:v.NUMBER,size:v.NUMBER,onAllData:v.FUNCTION,stream:v.BOOLEAN,componentStyle:v.OBJECT,initialLoader:v.STRING,noResults:v.STRING,showResultStats:v.BOOLEAN,onResultStats:v.FUNCTION,placeholder:v.STRING}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(133),l=n.n(i),p=n(4),u=n.n(p),c=n(0),h=n.n(c),d=n(3),f=n.n(d),y=n(5),m=n(66),v=n(13),b=n(6),g=n(11),S=n(12),T=n(68),P=n(2),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=n(1),C=n(20),w=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.state={markers:[],query:{},currentData:[],resultMarkup:[],isLoading:!1,queryStart:!1,resultStats:{resultFound:!1,total:0,took:0},showPlaceholder:!0,showInitialLoader:!1,requestOnScroll:!n.props.pagination},n.props.sortOptions){var o=n.props.sortOptions[0];n.sortObj=r({},o.appbaseField,{order:o.sortBy})}else n.props.sortBy&&(n.sortObj=r({},n.props.appbaseField,{order:n.props.sortBy}));return n.resultSortKey="ResultSort",n.channelId=null,n.channelListener=null,n.queryStartTime=0,n.handleSortSelect=n.handleSortSelect.bind(n),n.nextPage=n.nextPage.bind(n),n.appliedQuery={},n}return o(t,e),O(t,[{key:"componentDidMount",value:function(){this.streamProp=this.props.stream,this.size=this.props.size,this.initialize()}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){e.streamProp!==e.props.stream&&(e.streamProp=e.props.stream,e.removeChannel(),e.initialize(!0)),e.size!==e.props.size&&(e.size=e.props.size,e.setState({currentData:[]}),e.removeChannel(),e.initialize(!0)),e.props.pagination&&e.paginationAtVal!==e.props.paginationAt&&(e.paginationAtVal=e.props.paginationAt,e.executePaginationUpdate())},300)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.pagination!==this.pagination&&(this.pagination=e.pagination,this.setState({requestOnScroll:!e.pagination},function(){t.removeChannel(),t.initialize(!0)}))}},{key:"componentDidUpdate",value:function(){this.state.showPlaceholder||this.applyScroll()}},{key:"componentWillUnmount",value:function(){this.removeChannel()}},{key:"applyScroll",value:function(){var e=this,t=C(this.listParentElement),n=C(this.listChildElement),r=function(e){return e.height()?e.height():0},a=function(){var a=t.get(0).scrollHeight-45>t.height(),s=n.get(0).scrollHeight>n.height();if(!a&&!s&&n.length&&!e.props.pagination){var o=r(t.find(".rbc-title"))+r(t.find(".rbc-pagination"))*t.find(".rbc-pagination").length;t.height()-60-o>0&&n.css({height:n.height()+15,"padding-bottom":20})}};t&&t.length&&n&&n.length&&(n.css({height:"auto","padding-bottom":0}),setTimeout(a.bind(this),1e3))}},{key:"removeChannel",value:function(){this.channelId&&(y.a.stopStream(this.channelId),this.channelId=null),this.channelListener&&this.channelListener.remove(),this.loadListener&&this.loadListener.remove()}},{key:"createChannel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.react?this.props.react:{};n&&n.and?"string"==typeof n.and&&(n.and=[n.and]):n.and=[],n.and.push("streamChanges"),this.props.pagination&&(n.and.push("paginationChanges"),n.pagination=null),this.sortObj&&this.enableSort(n);var r=y.a.create(this.context.appbaseRef,this.context.type,n,this.props.size,this.props.from,this.props.stream,this.context.app);this.channelId=r.channelId,this.channelListener=r.emitter.addListener(r.channelId,function(t){if(t.error&&t.startTime>e.queryStartTime&&(e.setState({queryStart:!1,showPlaceholder:!1}),e.props.onAllData)){var n=k.prepareResultData(t);e.props.onAllData(n.res,n.err)}if(t.appliedQuery)if("historic"===t.mode&&t.startTime>e.queryStartTime){var r=!(!(t.appliedQuery&&Object.keys(t.appliedQuery).length&&t.data)||t.data.error||t.data.hits&&t.data.hits.total),a={resultFound:!!(t.appliedQuery&&t.data&&!t.data.error&&t.data.hits&&t.data.hits.total)};t.appliedQuery&&t.data&&!t.data.error&&(a.total=t.data.hits.total,a.took=t.data.took),e.setState({queryStart:!1,visibleNoResults:r,resultStats:a,showPlaceholder:!1}),e.afterChannelResponse(t)}else"streaming"===t.mode&&(e.afterChannelResponse(t),e.updateResultStats(t.data));else e.setState({showPlaceholder:!0})}),this.listenLoadingChannel(r),t&&setTimeout(function(){var e={key:"streamChanges",value:""};k.selectedSensor.set(e,!0)},100)}},{key:"updateResultStats",value:function(e){var t=this.state.resultStats;t.total=k.updateStats(t.total,e),this.setState({resultStats:t})}},{key:"listenLoadingChannel",value:function(e){var t=this;this.loadListener=e.emitter.addListener(e.channelId+"-query",function(e){if(e.appliedQuery){var n=!(t.state.requestOnScroll&&e.appliedQuery.body&&e.appliedQuery.body.from);t.setState({queryStart:e.queryState,showInitialLoader:n})}})}},{key:"afterChannelResponse",value:function(e){var t=this,n=e.data,r=void 0,a=[],s=[];if(this.streamFlag=!1,"streaming"===e.mode)this.channelMethod="streaming",a=n,a.stream=!0,s=this.state.currentData,this.streamFlag=!0,r=this.setMarkersData(void 0);else if("historic"===e.mode){this.queryStartTime=e.startTime,this.channelMethod="historic",a=n.hits&&n.hits.hits?n.hits.hits:[];var o=this.normalizeCurrentData(e,this.state.currentData,a);a=o.newData,s=o.currentData}this.setState({rawData:void 0,newData:a,currentData:s,markersData:r,isLoading:!1},function(){e.allMarkers=void 0;var r=JSON.parse(JSON.stringify(e));r.newData=t.state.newData,r.currentData=t.state.currentData,delete r.data,r=k.prepareResultData(r,n);var s=t.props.onAllData?t.props.onAllData(r.res,r.err):t.defaultonAllData(r.res,r.err);t.setState({resultMarkup:t.wrapMarkup(s),currentData:t.combineCurrentData(a)})})}},{key:"wrapMarkup",value:function(e){return u()(e)?e.map(function(e,t){return h.a.createElement("div",{key:t,className:"rbc-list-item"},e)}):e}},{key:"normalizeCurrentData",value:function(e,t,n){var r=JSON.parse(JSON.stringify(e.appliedQuery));this.state.requestOnScroll&&r&&r.body&&(delete r.body.from,delete r.body.size);var a=JSON.stringify(r)===JSON.stringify(this.appliedQuery),s=a?t||[]:[];return s.length?n=n.filter(function(e){var t=!0;return s.forEach(function(n){e._id+"-"+e._type==n._id+"-"+n._type&&(t=!1)}),t}):this.appliedQuery=r,a||C(".rbc.rbc-reactivelist").animate({scrollTop:0},100),{currentData:s,newData:n}}},{key:"combineCurrentData",value:function(e){return u()(e)?(e=e.map(function(e){return e.stream=!1,e}),this.state.currentData.concat(e)):this.streamDataModify(this.state.currentData,e,!1)}},{key:"enableSort",value:function(e){e.and.push(this.resultSortKey);var t={key:this.resultSortKey,value:this.sortObj};k.selectedSensor.setSortInfo(t)}},{key:"appendData",value:function(e){var t=this.state.rawData,n=t.hits.hits.concat(e.hits.hits);return t.hits.hits=l()(n,"_id"),t}},{key:"streamDataModify",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(t.stream=n,t.streamStart=new Date,t._deleted){var r=e.filter(function(e){return e._id!==t._id});e=r}else{var a=e.filter(function(e){return e._id!==t._id});e=a,e.unshift(t)}return e}},{key:"setMarkersData",value:function(e){return e||[]}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.createChannel(e),this.state.requestOnScroll?this.listComponent():this.setQueryForPagination()}},{key:"setQueryForPagination",value:function(){var e={queryType:"match",inputData:this.props.appbaseField,customQuery:function(){return null}},t={key:"paginationChanges",value:e};k.selectedSensor.setSensorInfo(t)}},{key:"executePaginationUpdate",value:function(){setTimeout(function(){var e={key:"paginationChanges",value:Math.random()};k.selectedSensor.set(e,!0)},100)}},{key:"paginationAt",value:function(e){var t=void 0;return!this.props.pagination||this.props.paginationAt!==e&&"both"!==this.props.paginationAt||(t=h.a.createElement("div",{className:"rbc-pagination-container col s12 col-xs-12"},h.a.createElement(T.a,{className:"rbc-pagination-"+e,componentId:"pagination",onPageChange:this.props.onPageChange,title:this.props.paginationTitle}))),t}},{key:"defaultonAllData",value:function(e){var t=this,n=null;if(e){var r=e.currentData;"historic"===e.mode?r=e.currentData.concat(e.newData):"streaming"===e.mode&&(r=k.combineStreamData(e.currentData,e.newData)),r&&(n=r.map(function(e){var n=e._source;return t.props.onData?t.props.onData(e):h.a.createElement("div",{className:"row",style:{marginTop:"20px"}},t.itemMarkup(n,e))}))}return n}},{key:"itemMarkup",value:function(e,t){return h.a.createElement("div",{key:t._id,style:{padding:"12px",fontSize:"12px"},className:"makerInfo"},h.a.createElement(m.a,{data:e}))}},{key:"nextPage",value:function(){function e(){this.setState({isLoading:!0}),y.a.nextPage(this.channelId)}this.state.resultStats.total>this.state.currentData.length&&!this.state.queryStart&&e.call(this)}},{key:"listComponent",value:function(){function e(e){var t=this;e&&e.addEventListener("scroll",function(){t.state.requestOnScroll&&C(e).scrollTop()+C(e).innerHeight()>=e.scrollHeight&&t.state.resultStats.total>t.state.currentData.length&&!t.state.queryStart&&t.nextPage()})}e.call(this,this.listParentElement),e.call(this,this.listChildElement)}},{key:"handleSortSelect",value:function(e){var t=e.target.value;this.sortObj=r({},this.props.sortOptions[t].appbaseField,{order:this.props.sortOptions[t].sortBy});var n={key:this.resultSortKey,value:this.sortObj};k.selectedSensor.set(n,!0,"sortChange")}},{key:"render",value:function(){var e=this,t=null,n=null,r=null,a=f()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-sort-active":this.props.sortOptions,"rbc-sort-inactive":!this.props.sortOptions,"rbc-stream-active":this.props.stream,"rbc-stream-inactive":!this.props.stream,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder,"rbc-initialloader-active":this.props.initialLoader,"rbc-initialloader-inactive":!this.props.initialLoader,"rbc-resultstats-active":this.props.showResultStats,"rbc-resultstats-inactive":!this.props.showResultStats,"rbc-noresults-active":this.props.noResults,"rbc-noresults-inactive":!this.props.noResults,"rbc-pagination-active":this.props.pagination,"rbc-pagination-inactive":!this.props.pagination});if(this.props.title&&(t=h.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title)),this.props.placeholder&&(n=h.a.createElement("div",{className:"rbc-placeholder col s12 col-xs-12"},this.props.placeholder)),this.props.sortOptions){var s=this.props.sortOptions.map(function(e,t){return h.a.createElement("option",{value:t,key:e.label},e.label)});r=h.a.createElement("div",{className:"rbc-sortoptions input-field col"},h.a.createElement("select",{className:"browser-default form-control",onChange:this.handleSortSelect},s))}return h.a.createElement("div",{className:"rbc-reactivelist-container"},h.a.createElement("div",{ref:function(t){e.listParentElement=t},className:"rbc rbc-reactivelist card thumbnail "+a,style:this.props.componentStyle},t,r,this.props.showResultStats&&this.state.resultStats.resultFound?h.a.createElement(S.a,{onResultStats:this.props.onResultStats,took:this.state.resultStats.took,total:this.state.resultStats.total}):null,this.paginationAt("top"),h.a.createElement("div",{ref:function(t){e.listChildElement=t},className:"rbc-reactivelist-scroll-container col s12 col-xs-12"},this.state.resultMarkup),this.state.isLoading?h.a.createElement("div",{className:"rbc-loader"}):null,this.state.showPlaceholder?n:null,this.paginationAt("bottom")),this.props.noResults&&this.state.visibleNoResults?h.a.createElement(g.a,{defaultText:this.props.noResults}):null,this.props.initialLoader&&this.state.queryStart&&this.state.showInitialLoader?h.a.createElement(b.a,{defaultText:this.props.initialLoader}):null,h.a.createElement(v.a,{container:"rbc-reactivelist-container"}))}}]),t}(c.Component);t.a=w,w.propTypes={componentId:h.a.PropTypes.string,appbaseField:h.a.PropTypes.string,title:h.a.PropTypes.oneOfType([h.a.PropTypes.string,h.a.PropTypes.element]),sortBy:h.a.PropTypes.oneOf(["asc","desc","default"]),sortOptions:h.a.PropTypes.arrayOf(h.a.PropTypes.shape({label:h.a.PropTypes.string,appbaseField:h.a.PropTypes.string,sortBy:h.a.PropTypes.string})),from:k.validation.resultListFrom,onAllData:h.a.PropTypes.func,size:k.sizeValidation,stream:h.a.PropTypes.bool,componentStyle:h.a.PropTypes.object,initialLoader:h.a.PropTypes.oneOfType([h.a.PropTypes.string,h.a.PropTypes.element]),noResults:h.a.PropTypes.oneOfType([h.a.PropTypes.string,h.a.PropTypes.element]),showResultStats:h.a.PropTypes.bool,onResultStats:h.a.PropTypes.func,placeholder:h.a.PropTypes.oneOfType([h.a.PropTypes.string,h.a.PropTypes.element]),react:h.a.PropTypes.object,paginationAt:h.a.PropTypes.string,pagination:h.a.PropTypes.bool},w.defaultProps={from:0,size:20,stream:!1,componentStyle:{},showResultStats:!0,pagination:!1,paginationAt:"bottom"},w.contextTypes={appbaseRef:h.a.PropTypes.any.isRequired,type:h.a.PropTypes.any.isRequired,app:h.a.PropTypes.any.isRequired},w.types={componentId:P.STRING,appbaseField:P.STRING,title:P.STRING,react:P.OBJECT,sortBy:P.STRING,sortOptions:P.OBJECT,from:P.NUMBER,onAllData:P.FUNCTION,onData:P.FUNCTION,size:P.NUMBER,stream:P.BOOLEAN,componentStyle:P.OBJECT,initialLoader:P.STRING,noResults:P.FUNCTION,showResultStats:P.BOOLEAN,onResultStats:P.FUNCTION,placeholder:P.STRING,pagination:P.BOOLEAN,paginationAt:P.STRING}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=(n(5),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=n(134),u=n(1),c=function(e){function t(e,n){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.state={},s.type=s.props.type?s.props.type:"*",s.appbaseRef=new p({url:"https://scalr.api.appbase.io",appname:s.props.app,credentials:s.props.credentials,type:s.type}),s}return s(t,e),l(t,[{key:"getChildContext",value:function(){return{appbaseRef:this.appbaseRef,type:this.type,app:this.props.app}}},{key:"render",value:function(){return i.a.createElement("section",{className:"rbc-base col s12 col-xs-12 "+this.props.theme,style:{padding:0}},this.props.children)}}]),t}(o.Component);t.a=c,c.propTypes={app:i.a.PropTypes.string.isRequired,credentials:u.reactiveBaseValidation,type:i.a.PropTypes.string,theme:i.a.PropTypes.string},c.defaultProps={theme:"rbc-blue"},c.childContextTypes={appbaseRef:i.a.PropTypes.any.isRequired,type:i.a.PropTypes.any.isRequired,app:i.a.PropTypes.any}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=n(3),p=n.n(l),u=n(2),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="match",n.value="customValue",n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.checkDefault()}},{key:"componentWillUpdate",value:function(){this.checkDefault()}},{key:"checkDefault",value:function(){this.props.defaultSelected&&this.defaultSelected!=this.props.defaultSelected&&(this.defaultSelected=this.props.defaultSelected,setTimeout(this.setValue.bind(this,this.defaultSelected),100))}},{key:"setQueryInfo",value:function(){var e={queryType:this.type,inputData:this.props.appbaseField};this.props.customQuery&&(e.customQuery=this.props.customQuery);var t={key:this.props.componentId,value:e};h.selectedSensor.setSensorInfo(t)}},{key:"setValue",value:function(e){var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),h.selectedSensor.set(t,!0)}},{key:"render",value:function(){var e=null,t=null;this.props.title&&(e=i.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title)),this.props.dataLabel&&(t=i.a.createElement("span",{className:"rbc-datalabel col s12 col-xs-12"},this.props.dataLabel));var n=p()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-datalabel-active":this.props.dataLabel,"rbc-datalabel-inactive":!this.props.dataLabel,"rbc-visible-active":this.props.visible,"rbc-visible-inactive":!this.props.visible});return i.a.createElement("div",{className:"rbc rbc-datacontroller card thumbnail "+n,style:this.props.componentStyle},this.props.visible?i.a.createElement("div",null,e,t):null)}}]),t}(o.Component);t.a=d,d.propTypes={componentId:i.a.PropTypes.string.isRequired,appbaseField:i.a.PropTypes.string,title:i.a.PropTypes.oneOfType([i.a.PropTypes.string,i.a.PropTypes.element]),visible:i.a.PropTypes.bool,dataLabel:i.a.PropTypes.oneOfType([i.a.PropTypes.string,i.a.PropTypes.element]),customQuery:i.a.PropTypes.func,onValueChange:i.a.PropTypes.func,componentStyle:i.a.PropTypes.object,defaultSelected:i.a.PropTypes.any},i.a.PropTypes.oneOfType([i.a.PropTypes.string,i.a.PropTypes.element]),d.defaultProps={visible:!1,defaultSelected:"default",componentStyle:{}},d.contextTypes={appbaseRef:i.a.PropTypes.any.isRequired,type:i.a.PropTypes.any.isRequired},d.types={componentId:u.STRING,appbaseField:u.STRING,appbaseFieldType:u.STRING,title:u.STRING,visible:u.BOOLEAN,dataLabel:u.STRING,customQuery:u.FUNCTION,componentStyle:u.OBJECT}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(35),i=n.n(o),l=n(121),p=n.n(l),u=n(4),c=n.n(u),h=n(0),d=n.n(h),f=n(10),y=n.n(f),m=n(3),v=n.n(m),b=n(5),g=n(2),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=n(1),k=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[],currentValue:null,isLoading:!1,options:[],rawData:{hits:{hits:[]}}},n.type="match_phrase",n.searchInputId="internal-"+n.props.componentId,n.channelId=null,n.channelListener=null,n.fieldType=T(n.props.appbaseField),n.handleSearch=n.handleSearch.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.setValue=n.setValue.bind(n),n.defaultSearchQuery=n.defaultSearchQuery.bind(n),n.previousSelectedSensor={},n}return s(t,e),P(t,[{key:"removeDuplicates",value:function(e,t){return e.filter(function(e,n,r){return r.map(function(e){return e[t]}).indexOf(e[t])===n})}}]),P(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.createChannel(),this.checkDefault()}},{key:"componentWillUpdate",value:function(){this.checkDefault()}},{key:"componentWillUnmount",value:function(){this.channelId&&b.a.stopStream(this.channelId),this.channelListener&&this.channelListener.remove()}},{key:"highlightQuery",value:function(){var e={},t=this.props.highlightFields?this.props.highlightFields:this.props.appbaseField;return"string"==typeof t?e[t]={}:c()(t)&&t.forEach(function(t){e[t]={}}),{highlight:{pre_tags:['<span class="rbc-highlight">'],post_tags:["</span>"],fields:e}}}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.defaultSearchQuery}};this.props.highlight&&(e.value.externalQuery=this.highlightQuery()),O.selectedSensor.setSensorInfo(e);var t={key:this.searchInputId,value:{queryType:"multi_match",inputData:this.props.appbaseField,customQuery:this.defaultSearchQuery}};O.selectedSensor.setSensorInfo(t)}},{key:"setValue",value:function(e){var t={key:this.searchInputId,value:e};O.selectedSensor.set(t,!0),e&&""!==e.trim()?this.setState({options:[{label:e,value:e}],isLoadingOptions:!0,currentValue:e}):this.setState({options:[],isLoadingOptions:!1,currentValue:e})}},{key:"getValue",value:function(e,t){var n=void(arguments.length>2&&void 0!==arguments[2]&&arguments[2]);if(p()(t,e))n=t[e];else if(e.indexOf(".")>-1){var r="",a=e.split(".");a.forEach(function(e,s){r+=e,c()(i()(t,r))&&(r+="["+s+"]"),a.length-1!==s?r+=".":n=i()(t,r)})}return n}},{key:"setData",value:function(e){var t=this,n=[];c()(this.props.appbaseField),this.props.appbaseField,e.hits.hits.map(function(e){if("string"===t.fieldType){var r=t.getValue(t.props.appbaseField.trim(),e._source);n.push({value:r,label:r})}else"object"===t.fieldType&&t.props.appbaseField.map(function(r){var a=t.getValue(r,e._source);a&&n.push({value:a,label:a})})}),this.state.currentValue&&""!==this.state.currentValue.trim()&&n.unshift({label:this.state.currentValue,value:this.state.currentValue}),n=this.removeDuplicates(n,"label"),this.setState({options:n,isLoadingOptions:!1})}},{key:"defaultSearchQuery",value:function(e){var t=null,n=void 0;return e&&(n="string"===this.fieldType?[this.props.appbaseField]:this.props.appbaseField,t={bool:{should:[{multi_match:{query:e,fields:n,type:"phrase_prefix"}},{multi_match:{query:e,fields:n}}],minimum_should_match:"1"}}),t}},{key:"createChannel",value:function(){var e=this,t=this.props.react?this.props.react:{};t&&t.and&&"string"==typeof t.and?t.and=[t.and]:t.and=t.and?t.and:[],t.and.push(this.searchInputId);var n=b.a.create(this.context.appbaseRef,this.context.type,t);this.channelId=n.channelId,this.channelListener=n.emitter.addListener(n.channelId,function(t){var n=t.data,r=void 0;"streaming"===t.mode?(r=e.state.rawData,r.hits.hits.push(t.data)):"historic"===t.mode&&(r=n),e.setState({rawData:r}),e.props.autocomplete&&e.setData(r)})}},{key:"checkDefault",value:function(){this.props.defaultSelected&&this.defaultSelected!==this.props.defaultSelected&&(this.defaultSelected=this.props.defaultSelected,setTimeout(this.setValue.bind(this,this.defaultSelected),100),this.handleSearch({value:this.defaultSelected}))}},{key:"handleSearch",value:function(e){var t=e?e.value:null;t="null"===t?null:t;var n={key:this.props.componentId,value:t};O.selectedSensor.set(n,!0),this.setState({currentValue:t})}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.setState({currentValue:t});var n={key:this.props.componentId,value:t};this.props.onValueChange&&this.props.onValueChange(n.value),O.selectedSensor.set(n,!0)}},{key:"render",value:function(){var e=null;this.props.title&&(e=d.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=v()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder,"rbc-autocomplete-active":this.props.autocomplete,"rbc-autocomplete-inactive":!this.props.autocomplete});return d.a.createElement("div",{className:"rbc rbc-datasearch col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},e,this.props.autocomplete?d.a.createElement(y.a,S({isLoading:this.state.isLoadingOptions,value:this.state.currentValue,options:this.state.options,onInputChange:this.setValue,onChange:this.handleSearch,onBlurResetsInput:!1},this.props)):d.a.createElement("div",{className:"rbc-search-container col s12 col-xs-12"},d.a.createElement("input",{type:"text",className:"rbc-input",placeholder:this.props.placeholder,value:this.state.currentValue?this.state.currentValue:"",onChange:this.handleInputChange}),d.a.createElement("span",{className:"rbc-search-icon"})))}}]),t}(h.Component);t.a=k,k.propTypes={componentId:d.a.PropTypes.string.isRequired,appbaseField:d.a.PropTypes.oneOfType([d.a.PropTypes.string,d.a.PropTypes.arrayOf(d.a.PropTypes.string)]),title:d.a.PropTypes.oneOfType([d.a.PropTypes.string,d.a.PropTypes.element]),placeholder:d.a.PropTypes.string,autocomplete:d.a.PropTypes.bool,defaultSelected:d.a.PropTypes.string,customQuery:d.a.PropTypes.func,onValueChange:d.a.PropTypes.func,react:d.a.PropTypes.object,componentStyle:d.a.PropTypes.object,highlight:d.a.PropTypes.bool,highlightFields:d.a.PropTypes.oneOfType([d.a.PropTypes.string,d.a.PropTypes.arrayOf(d.a.PropTypes.string)])},k.defaultProps={placeholder:"Search",autocomplete:!0,componentStyle:{},highlight:!1},k.contextTypes={appbaseRef:d.a.PropTypes.any.isRequired,type:d.a.PropTypes.any.isRequired},k.types={componentId:g.STRING,appbaseField:g.STRING,appbaseFieldType:g.STRING,react:g.OBJECT,title:g.STRING,placeholder:g.STRING,autocomplete:g.BOOLEAN,defaultSelected:g.STRING,customQuery:g.FUNCTION,componentStyle:g.OBJECT,highlight:g.BOOLEAN}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(41),u=(n.n(p),n(3)),c=n.n(u),h=n(2),d=n(40),f=n.n(d),y=n(42),m=n.n(y),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(1),S=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={currentValue:n.props.defaultSelected,focused:n.props.focused},n.type="range",n.handleChange=n.handleChange.bind(n),n.customQuery=n.customQuery.bind(n),n}return o(t,e),b(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.checkDefault()}},{key:"componentWillUpdate",value:function(){this.checkDefault()}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};g.selectedSensor.setSensorInfo(e)}},{key:"checkDefault",value:function(){this.props.defaultSelected&&this.props.queryFormat&&g.dateFormat[this.props.queryFormat]&&f()(this.defaultDate).format(g.dateFormat[this.props.queryFormat])!==f()(this.props.defaultSelected).format(g.dateFormat[this.props.queryFormat])&&(this.defaultDate=this.props.defaultSelected,setTimeout(this.handleChange.bind(this,this.defaultDate),1e3))}},{key:"customQuery",value:function(e){var t=null;return e&&this.props.queryFormat&&g.dateFormat[this.props.queryFormat]&&(t={range:r({},this.props.appbaseField,{gte:f()(e).subtract(24,"hours").format(g.dateFormat[this.props.queryFormat]),lte:f()(e).format(g.dateFormat[this.props.queryFormat])})}),t}},{key:"handleChange",value:function(e){this.setState({currentValue:e});var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),g.selectedSensor.set(t,!0)}},{key:"handleFocus",value:function(e){this.setState({focused:e})}},{key:"allowAllDates",value:function(){var e=void 0;return this.props.allowAllDates&&(e={isOutsideRange:function(){return!1}}),e}},{key:"render",value:function(){var e=this,t=null;this.props.title&&(t=l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var n=c()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title});return l.a.createElement("div",{className:"rbc rbc-datepicker col s12 col-xs-12 card thumbnail "+n,style:this.props.componentStyle},t,l.a.createElement("div",{className:"col s12 col-xs-12"},l.a.createElement(p.SingleDatePicker,v({id:this.props.componentId,date:this.state.currentValue,placeholder:this.props.placeholder,focused:this.state.focused,numberOfMonths:this.props.numberOfMonths},this.props.extra,this.allowAllDates(),{onDateChange:function(t){e.handleChange(t)},onFocusChange:function(t){var n=t.focused;e.handleFocus(n)}}))))}}]),t}(i.Component);t.a=S,S.propTypes={componentId:l.a.PropTypes.string.isRequired,appbaseField:l.a.PropTypes.string,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),placeholder:l.a.PropTypes.string,defaultSelected:m.a.momentObj,focused:l.a.PropTypes.bool,numberOfMonths:l.a.PropTypes.number,allowAllDates:l.a.PropTypes.bool,extra:l.a.PropTypes.any,customQuery:l.a.PropTypes.func,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object,queryFormat:l.a.PropTypes.oneOf(Object.keys(g.dateFormat))},S.defaultProps={placeholder:"Select Date",numberOfMonths:1,focused:!0,allowAllDates:!0,defaultSelected:null,componentStyle:{},queryFormat:"epoch_millis"},S.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired},S.types={componentId:h.STRING,appbaseField:h.STRING,appbaseFieldType:h.NUMBER,title:h.STRING,placeholder:h.STRING,defaultSelected:h.OBJECT,focused:h.BOOLEAN,numberOfMonths:h.NUMBER,allowAllDates:h.BOOLEAN,extra:h.OBJECT,customQuery:h.FUNCTION,componentStyle:h.OBJECT,queryFormat:h.STRING}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),p=n(0),u=n.n(p),c=n(41),h=(n.n(c),n(3)),d=n.n(h),f=n(2),y=n(40),m=n.n(y),v=n(42),b=n.n(v),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=n(1),P=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={currentValue:{startDate:n.props.defaultSelected.start,endDate:n.props.defaultSelected.end},focusedInput:null},n.type="range",n.handleChange=n.handleChange.bind(n),n.customQuery=n.customQuery.bind(n),n.onFocusChange=n.onFocusChange.bind(n),n}return o(t,e),S(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.checkDefault()}},{key:"componentWillUpdate",value:function(){this.checkDefault()}},{key:"onFocusChange",value:function(e){this.setState({focusedInput:e})}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};T.selectedSensor.setSensorInfo(e)}},{key:"isDateChange",value:function(){function e(){var e=!1;return this.props.defaultSelected.start&&this.props.defaultSelected.end&&(this.startDate=this.props.defaultSelected.start,this.endDate=this.props.defaultSelected.end,e=!0),e}var t=!1;try{this.startDate&&this.endDate?m()(this.startDate).format(T.dateFormat[this.props.queryFormat])!==m()(this.props.defaultSelected.start).format(T.dateFormat[this.props.queryFormat])&&m()(this.endDate).format(T.dateFormat[this.props.queryFormat])!==m()(this.props.defaultSelected.end).format(T.dateFormat[this.props.queryFormat])&&(this.startDate=this.props.defaultSelected.start,this.endDate=this.props.defaultSelected.end,t=!0):t=e.call(this)}catch(n){t=e.call(this)}return t}},{key:"checkDefault",value:function(){if(this.isDateChange()){var e={startDate:this.startDate,endDate:this.endDate};setTimeout(this.handleChange.bind(this,e),1e3)}}},{key:"customQuery",value:function(e){var t=null;return e&&e.startDate&&e.endDate&&(t=this.generateQuery(e)),t}},{key:"generateQuery",value:function(e){return l()(this.props.appbaseField)&&2===this.props.appbaseField.length?{bool:{must:[{range:r({},this.props.appbaseField[0],{lte:m()(e.startDate).format(T.dateFormat[this.props.queryFormat])})},{range:r({},this.props.appbaseField[1],{gte:m()(e.endDate).format(T.dateFormat[this.props.queryFormat])})}]}}:l()(this.props.appbaseField)?{range:r({},this.props.appbaseField[0],{gte:m()(e.startDate).format(T.dateFormat[this.props.queryFormat]),lte:m()(e.endDate).format(T.dateFormat[this.props.queryFormat])})}:{range:r({},this.props.appbaseField,{gte:m()(e.startDate).format(T.dateFormat[this.props.queryFormat]),lte:m()(e.endDate).format(T.dateFormat[this.props.queryFormat])})}}},{key:"handleChange",value:function(e){this.setState({currentValue:e}),e.startDate&&e.endDate&&this.setValue(e)}},{key:"setValue",value:function(e){var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),T.selectedSensor.set(t,!0)}},{key:"allowAllDates",value:function(){var e=void 0;return this.props.allowAllDates&&(e={isOutsideRange:function(){return!1}}),e}},{key:"render",value:function(){var e=this,t=null;this.props.title&&(t=u.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var n=d()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title});return u.a.createElement("div",{className:"rbc rbc-daterange col s12 col-xs-12 card thumbnail "+n,style:this.props.componentStyle},t,u.a.createElement("div",{className:"rbc-daterange-component col s12 col-xs-12"},u.a.createElement(c.DateRangePicker,g({id:this.props.componentId,startDate:this.state.currentValue.startDate,endDate:this.state.currentValue.endDate,focusedInput:this.state.focusedInput,numberOfMonths:this.props.numberOfMonths},this.props.extra,this.allowAllDates(),{onDatesChange:function(t){e.handleChange(t)},onFocusChange:this.onFocusChange}))))}}]),t}(p.Component);t.a=P,P.propTypes={componentId:u.a.PropTypes.string.isRequired,appbaseField:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.array]),title:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),defaultSelected:u.a.PropTypes.shape({start:b.a.momentObj,end:b.a.momentObj}),numberOfMonths:u.a.PropTypes.number,allowAllDates:u.a.PropTypes.bool,extra:u.a.PropTypes.any,customQuery:u.a.PropTypes.func,onValueChange:u.a.PropTypes.func,componentStyle:u.a.PropTypes.object,queryFormat:u.a.PropTypes.oneOf(Object.keys(T.dateFormat))},P.defaultProps={numberOfMonths:2,allowAllDates:!0,defaultSelected:{start:null,end:null},queryFormat:"epoch_millis"},P.contextTypes={appbaseRef:u.a.PropTypes.any.isRequired,type:u.a.PropTypes.any.isRequired},P.types={componentId:f.STRING,appbaseField:f.STRING,appbaseFieldType:f.STRING,title:f.STRING,defaultSelected:f.OBJECT,numberOfMonths:f.NUMBER,allowAllDates:f.BOOLEAN,extra:f.OBJECT,customQuery:f.FUNCTION,queryFormat:f.STRING}},function(e,t,n){"use strict";function r(e){return s.a.createElement(o.a,l({},e,{multipleSelect:!0}))}var a=n(0),s=n.n(a),o=n(21),i=n(2);t.a=r;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.propTypes={defaultSelected:s.a.PropTypes.array,componentStyle:s.a.PropTypes.object},r.types={componentId:i.STRING,appbaseField:i.STRING,appbaseFieldType:i.KEYWORD,defaultSelected:i.ARRAY,react:i.OBJECT,title:i.STRING,size:i.NUMBER,showCount:i.BOOLEAN,sortBy:i.STRING,placeholder:i.STRING,selectAllLabel:i.STRING,customQuery:i.FUNCTION,initialLoader:i.OBJECT,componentStyle:i.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(9),l=n.n(i),p=n(0),u=n.n(p),c=n(10),h=n.n(c),d=n(3),f=n.n(d),y=n(2),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),b=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:""},n.type="range",n.state.data=n.props.data.map(function(e){return e.value=e.label,e}),n.defaultSelected=n.props.defaultSelected,n.handleChange=n.handleChange.bind(n),n.customQuery=n.customQuery.bind(n),n}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setQueryInfo(),this.defaultSelected){var t=this.state.data.filter(function(t){return e.defaultSelected.indexOf(t.label)>-1});t&&t.length&&setTimeout(this.handleChange.bind(this,t),1e3)}}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(!l()(e.defaultSelected,e.props.defaultSelected)){e.defaultSelected=e.props.defaultSelected;var t=e.state.data.filter(function(t){return e.defaultSelected.indexOf(t.label)>-1});t&&t.length&&setTimeout(e.handleChange.bind(e,t),1e3)}},300)}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};v.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){if(e)return{bool:{should:function(t){if(e.length>0)return e.map(function(e){return{range:r({},t,{gte:e.start,lte:e.end,boost:2})}})}(this.props.appbaseField),minimum_should_match:1,boost:1}}}},{key:"handleChange",value:function(e){var t=[];t=e.map(function(e){return e.label}),t=t.join(),this.setState({selected:t});var n={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(n.value),v.selectedSensor.set(n,!0)}},{key:"render",value:function(){var e=null;this.props.title&&(e=u.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=f()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder});return u.a.createElement("div",{className:"rbc rbc-multidropdownrange col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},u.a.createElement("div",{className:"row"},e,u.a.createElement("div",{className:"col s12 col-xs-12"},u.a.createElement(h.a,{options:this.state.data,value:this.state.selected,onChange:this.handleChange,clearable:!1,multi:!0,placeholder:this.props.placeholder,searchable:!0}))))}}]),t}(p.Component);t.a=b,b.propTypes={componentId:u.a.PropTypes.string.isRequired,appbaseField:u.a.PropTypes.string.isRequired,title:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),placeholder:u.a.PropTypes.string,data:u.a.PropTypes.any.isRequired,defaultSelected:u.a.PropTypes.array,customQuery:u.a.PropTypes.func,componentStyle:u.a.PropTypes.object},b.defaultProps={},b.contextTypes={appbaseRef:u.a.PropTypes.any.isRequired,type:u.a.PropTypes.any.isRequired},b.types={componentId:y.STRING,appbaseField:y.STRING,appbaseFieldType:y.NUMBER,data:y.OBJECT,defaultSelected:y.ARRAY,title:y.STRING,placeholder:y.STRING,customQuery:y.FUNCTION,componentStyle:y.OBJECT}},function(e,t,n){"use strict";function r(e){return s.a.createElement(o.a,l({},e,{multipleSelect:!0}))}var a=n(0),s=n.n(a),o=n(22),i=n(2);t.a=r;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.propTypes={componentId:s.a.PropTypes.string.isRequired,appbaseField:s.a.PropTypes.string.isRequired,title:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element]),defaultSelected:s.a.PropTypes.array,size:s.a.PropTypes.number,showCount:s.a.PropTypes.bool,sortBy:s.a.PropTypes.string,showSearch:s.a.PropTypes.bool,placeholder:s.a.PropTypes.string,customQuery:s.a.PropTypes.func,initialLoader:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element]),react:s.a.PropTypes.object,componentStyle:s.a.PropTypes.object},r.defaultProps={showCount:!0,sort:"count",size:100,showSearch:!1,title:null,placeholder:"Search"},r.contextTypes={appbaseRef:s.a.PropTypes.any.isRequired,type:s.a.PropTypes.any.isRequired},r.types={componentId:i.STRING,appbaseField:i.STRING,appbaseFieldType:i.KEYWORD,title:i.STRING,react:i.OBJECT,defaultSelected:i.ARRAY,size:i.NUMBER,sortBy:i.STRING,showCount:i.BOOLEAN,showSearch:i.BOOLEAN,placeholder:i.STRING,customQuery:i.FUNCTION,initialLoader:i.OBJECT,componentStyle:i.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),p=n(9),u=n.n(p),c=n(0),h=n.n(c),d=n(3),f=n.n(d),y=n(2),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),b=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:[]},n.type="range",n.defaultSelected=n.props.defaultSelected,n.handleChange=n.handleChange.bind(n),n.resetState=n.resetState.bind(n),n.handleTagClick=n.handleTagClick.bind(n),n.customQuery=n.customQuery.bind(n),n}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setQueryInfo(),this.props.defaultSelected){var t=this.props.data.filter(function(t){return e.props.defaultSelected.indexOf(t.label)>-1});t&&t.length&&setTimeout(this.handleChange.bind(this,t),1e3)}}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(!u()(e.defaultSelected,e.props.defaultSelected)){e.defaultSelected=e.props.defaultSelected,e.resetState();var t=e.props.data.filter(function(t){return e.props.defaultSelected.indexOf(t.label)>-1});t&&t.length&&setTimeout(e.handleChange.bind(e,t),1e3)}},300)}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};v.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){return e?{bool:{should:function(t){return e.length>0?e.map(function(e){return{range:r({},t,{gte:e.start,lte:e.end,boost:2})}}):null}(this.props.appbaseField),minimum_should_match:1,boost:1}}:null}},{key:"handleChange",value:function(e){function t(e,t,a){a.label===e.label&&(r=t,n.splice(t,1))}var n=this.state.selected,r=null,a=e;l()(e)||(a=[e]),a.forEach(function(e){n.forEach(function(n,r){t(n,r,e)})}),null===r&&a.forEach(function(e){n.push(e)}),this.setState({selected:n});var s={key:this.props.componentId,value:n};this.props.onValueChange&&this.props.onValueChange(s.value),v.selectedSensor.set(s,!0)}},{key:"resetState",value:function(){this.setState({selected:[]});var e={key:this.props.componentId,value:[]};v.selectedSensor.set(e,!0)}},{key:"handleTagClick",value:function(e){var t=this.state.selected.filter(function(t){return t.label===e});this.handleChange(t[0])}},{key:"renderButtons",value:function(){var e=this,t=void 0,n=this.state.selected.map(function(e){return e.label});return this.props.data&&(t=this.props.data.map(function(t){return h.a.createElement("div",{className:"rbc-list-item row",key:t.label,onClick:function(){return e.handleChange(t)}},h.a.createElement("input",{type:"checkbox",className:"rbc-checkbox-item",checked:n.indexOf(t.label)>-1,value:t.label}),h.a.createElement("label",{className:"rbc-label"},t.label))})),t}},{key:"render",value:function(){var e=this,t=null,n=[];this.props.title&&(t=h.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title)),this.state.selected&&this.state.selected.forEach(function(t){n.push(h.a.createElement(g,{key:t.label,value:t.label,onClick:e.handleTagClick}))});var r=f()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title});return h.a.createElement("div",{className:"rbc rbc-multirange col s12 col-xs-12 card thumbnail "+r,style:this.props.componentStyle},h.a.createElement("div",{className:"row"},t,h.a.createElement("div",{className:"col s12 col-xs-12 rbc-list-container"},n.length?h.a.createElement("div",{className:"row",style:{marginTop:"0"}},n):null,this.renderButtons())))}}]),t}(c.Component);t.a=b;var g=function(e){return h.a.createElement("span",{onClick:function(){return e.onClick(e.value)},className:"rbc-tag-item col"},h.a.createElement("a",{className:"close"},"×"),h.a.createElement("span",null,e.value))};g.propTypes={onClick:h.a.PropTypes.func.isRequired,value:h.a.PropTypes.string.isRequired},b.propTypes={appbaseField:h.a.PropTypes.string.isRequired,componentId:h.a.PropTypes.string.isRequired,title:h.a.PropTypes.oneOfType([h.a.PropTypes.string,h.a.PropTypes.element]),data:h.a.PropTypes.any.isRequired,defaultSelected:h.a.PropTypes.array,customQuery:h.a.PropTypes.func,onValueChange:h.a.PropTypes.func,componentStyle:h.a.PropTypes.object},b.defaultProps={},b.contextTypes={appbaseRef:h.a.PropTypes.any.isRequired,type:h.a.PropTypes.any.isRequired},b.types={componentId:y.STRING,appbaseField:y.STRING,appbaseFieldType:y.NUMBER,title:y.STRING,data:y.OBJECT,defaultSelected:y.ARRAY,customQuery:y.FUNCTION,componentStyle:y.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(3),u=n.n(p),c=n(2),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=function(e){return l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},e.title)},y=function(e){var t=u()({"rbc-btn-active":e.isActive,"rbc-btn-inactive":!e.isActive}),n=e.type,r="plus"==n?1:-1;return l.a.createElement("button",{className:"btn rbc-btn "+t,onClick:e.isActive&&function(){return e.handleChange(r)}},l.a.createElement("span",{className:"fa fa-"+n+" rbc-icon"}))},m=function(e){var t=e.label,n=e.end,r=e.start,a=e.handleChange,s=void 0!=e.value?e.value:r,o=void 0==n||s<n,i=void 0==r||s>r;return l.a.createElement("div",{className:"rbc-numberbox-container col s12 col-xs-12"},l.a.createElement("div",{className:"rbc-label"},t),l.a.createElement("div",{className:"rbc-numberbox-btn-container"},l.a.createElement(y,{isActive:i,handleChange:a,type:"minus"}),l.a.createElement("span",{className:"rbc-numberbox-number"},s),l.a.createElement(y,{isActive:o,handleChange:a,type:"plus"})))},v=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=r.props,i=o.defaultSelected,l=o.focused;return r.state={currentValue:i||r.props.data.start,focused:l},r.type="term",r.handleChange=r.handleChange.bind(r),r.customQuery=r.customQuery.bind(r),r}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),setTimeout(this.handleChange.bind(this),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){!e.defaultSelected&&0!==e.defaultSelected||e.defaultSelected===t.state.currentValue||t.setState({currentValue:e.defaultSelected}),e.queryFormat!==t.queryFormat&&(t.queryFormat=e.queryFormat,t.updateQuery())},300)}},{key:"customQuery",value:function(e){var t=null;if(e&&(e.value||0===e.value)){var n=e.value;switch(this.props.queryFormat){case"exact":t=this.exactQuery(n);break;case"lte":t=this.lteQuery(n);break;case"gte":default:t=this.gteQuery(n)}}return t}},{key:"exactQuery",value:function(e){return r({},this.type,r({},this.props.appbaseField,e))}},{key:"gteQuery",value:function(e){return{range:r({},this.props.appbaseField,{gte:e,boost:2})}}},{key:"lteQuery",value:function(e){return{range:r({},this.props.appbaseField,{lte:e,boost:2})}}},{key:"setQueryInfo",value:function(){var e=this.props,t=e.componentId,n=e.appbaseField,r={key:t,value:{queryType:this.type,inputData:n,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};d.selectedSensor.setSensorInfo(r)}},{key:"handleChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props,n=(t.componentId,t.data),r=n.start,a=n.end,s=this.state.currentValue;r=void 0!=r?r:s-1,a=void 0!=a?a:s+1,e>0&&s<a?s+=1:e<0&&s>r&&(s-=1),this.setState({currentValue:s},this.updateQuery.bind(this))}},{key:"updateQuery",value:function(){var e={key:this.props.componentId,value:{value:this.state.currentValue,queryFormat:this.props.queryFormat}};this.props.onValueChange&&this.props.onValueChange(e.value),d.selectedSensor.set(e,!0)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.data,r=e.labelPosition,a=this.state.currentValue,s=t?l.a.createElement(f,{title:t}):null,o=u()({"rbc-title-active":t,"rbc-title-inactive":!t});return l.a.createElement("div",{className:"rbc rbc-numberbox col s12 col-xs-12 card thumbnail "+o+" rbc-label-"+r,style:this.props.componentStyle},l.a.createElement("div",{className:"row"},s,l.a.createElement(m,{handleChange:this.handleChange,value:a,label:n.label,start:n.start,end:n.end})))}}]),t}(i.Component);t.a=v,v.propTypes={componentId:l.a.PropTypes.string.isRequired,appbaseField:l.a.PropTypes.string.isRequired,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),data:l.a.PropTypes.shape({start:d.validateThreshold,end:d.validateThreshold,label:l.a.PropTypes.string}),defaultSelected:d.valueValidation,labelPosition:l.a.PropTypes.oneOf(["top","bottom","left","right"]),customQuery:l.a.PropTypes.func,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object,queryFormat:l.a.PropTypes.oneOf(["exact","gte","lte"])},v.defaultProps={componentStyle:{},queryFormat:"gte"},v.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired},v.types={componentId:c.STRING,appbaseField:c.STRING,appbaseFieldType:c.NUMBER,title:c.STRING,data:c.OBJECT,defaultSelected:c.NUMBER,labelPosition:c.STRING,customQuery:c.FUNCTION,componentStyle:c.OBJECT,queryFormat:c.STRING}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(129),l=n.n(i),p=n(0),u=n.n(p),c=n(135),h=n.n(c),d=n(3),f=n.n(d),y=n(5),m=n(63),v=n(6),b=n(2),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=n(1),T=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.range.start?n.props.range.start:0,o=n.props.range.end?n.props.range.end:5,i={};return i.min=n.props.defaultSelected.start<r?r:n.props.defaultSelected.start,i.max=n.props.defaultSelected.end<o?n.props.defaultSelected.end:o,n.state={values:i,startThreshold:r,endThreshold:o,currentValues:[],counts:[],rawData:{hits:{hits:[]}}},n.maxSize=100,n.queryStartTime=0,n.type="range",n.channelId=null,n.channelListener=null,n.handleValuesChange=n.handleValuesChange.bind(n),n.handleResults=n.handleResults.bind(n),n.customQuery=n.customQuery.bind(n),n.histogramQuery=n.histogramQuery.bind(n),n}return o(t,e),g(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.createChannel()}},{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){if(e.defaultSelected.start!==t.state.values.min||e.defaultSelected.end!==t.state.values.max&&e.range.start<=e.defaultSelected.start&&e.range.end>=e.defaultSelected.end){var n=(e.defaultSelected.end-e.defaultSelected.start)%e.stepValue;if(n){t.setState({values:{min:t.state.values.min,max:e.defaultSelected.end-n}});var r={key:t.props.componentId,value:{from:t.state.values.min,to:e.defaultSelected.end-n}};setTimeout(function(){t.props.onValueChange&&t.props.onValueChange(r.value),S.selectedSensor.set(r,!0)},1e3)}else{var a={};a.min=e.defaultSelected.start,a.max=e.defaultSelected.end,t.setState({values:a,currentValues:a});var s={key:t.props.componentId,value:{from:a.min,to:a.max}};setTimeout(function(){t.props.onValueChange&&t.props.onValueChange(s.value),S.selectedSensor.set(s,!0)},1e3)}}if(e.range.start!==t.state.startThreshold||e.range.end!==t.state.endThreshold){if(e.range.start<=e.defaultSelected.start&&e.range.end>=e.defaultSelected.end)t.setState({startThreshold:e.range.start,endThreshold:e.range.end});else{var o={min:t.state.values.min,max:t.state.values.max};t.state.values.min<e.range.start&&(o.min=e.range.start),t.state.values.max>e.range.end&&(o.max=e.range.end),t.setState({startThreshold:e.range.start,endThreshold:e.range.end,values:o});var i={from:o.min,to:o.max},l={key:t.props.componentId,value:i};t.props.onValueChange&&t.props.onValueChange(l.value),S.selectedSensor.set(l,!0)}t.setRangeValue()}if(e.stepValue!==t.props.stepValue){var p=(e.defaultSelected.end-e.defaultSelected.start)%e.stepValue;if(p){t.setState({values:{min:t.state.values.min,max:e.defaultSelected.end-p}});var u={key:t.props.componentId,value:{from:t.state.values.min,to:e.defaultSelected.end-p}};t.props.onValueChange&&t.props.onValueChange(u.value),S.selectedSensor.set(u,!0)}}},300)}},{key:"shouldComponentUpdate",value:function(e,t){return e.stepValue<=0||e.stepValue>Math.floor((e.range.end-e.range.start)/2)?(console.error("Step value is invalid, it should be less than or equal to "+Math.floor((e.range.end-e.range.start)/2)+"."),!1):!(t.values.max>t.endThreshold)}},{key:"componentWillUnmount",value:function(){this.channelId&&y.a.stopStream(this.channelId),this.channelListener&&this.channelListener.remove(),this.loadListener&&this.loadListener.remove()}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField}},t={key:this.props.componentId+"-internal",value:{queryType:"range",inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};S.selectedSensor.setSensorInfo(e),S.selectedSensor.setSensorInfo(t),this.setRangeValue()}},{key:"setRangeValue",value:function(){var e={key:this.props.componentId+"-internal",value:this.props.range};this.props.onValueChange&&this.props.onValueChange(e.value),S.selectedSensor.set(e,!0)}},{key:"customQuery",value:function(e){if(e)return{range:r({},this.props.appbaseField,{gte:e.start,lte:e.end,boost:2})}}},{key:"histogramQuery",value:function(){return r({},this.props.appbaseField,{histogram:{field:this.props.appbaseField,interval:this.props.interval?this.props.interval:Math.ceil((this.props.range.end-this.props.range.start)/10)}})}},{key:"createChannel",value:function(){var e=this,t=this.props.react?this.props.react:{};t.aggs={key:this.props.appbaseField,sort:"asc",size:1e3,customQuery:this.histogramQuery},t&&t.and&&"string"==typeof t.and?t.and=[t.and]:t.and=t.and?t.and:[],t.and.push(this.props.componentId+"-internal");var n=y.a.create(this.context.appbaseRef,this.context.type,t);this.channelId=n.channelId,this.channelListener=n.emitter.addListener(n.channelId,function(t){if(t.error&&e.setState({queryStart:!1}),t.appliedQuery&&t.startTime>e.queryStartTime){e.queryStartTime=t.startTime?t.startTime:0;var n=t.data,r=void 0;"streaming"===t.mode?(r=e.state.rawData,r.hits.hits.push(t.data)):"historic"===t.mode&&(r=n),e.setState({queryStart:!1,rawData:r}),e.setData(n)}}),this.listenLoadingChannel(n)}},{key:"listenLoadingChannel",value:function(e){var t=this;this.loadListener=e.emitter.addListener(e.channelId+"-query",function(e){e.appliedQuery&&t.setState({queryStart:e.queryState})})}},{key:"getSize",value:function(){return Math.min(this.props.range.end-this.props.range.start,this.maxSize)}},{key:"setData",value:function(e){try{this.addItemsToList(e.aggregations[this.props.appbaseField].buckets)}catch(e){console.log(e)}}},{key:"handleValuesChange",value:function(e,t){this.setState({values:t})}},{key:"countCalc",value:function(e,t,n){return n.map(function(e){return e.doc_count})}},{key:"addItemsToList",value:function(e){var t=this;e=l()(e,["key"],["asc"]);var n=e.length,r=this.state.startThreshold?this.state.startThreshold:e[0].key,a=this.state.endThreshold?this.state.endThreshold:e[n-1].key;if(n>1){var s={counts:this.countCalc(r,a,e),startThreshold:r,endThreshold:a,values:{min:this.state.values.min,max:this.state.values.max}};this.setState(s,function(){t.handleResults(null,s.values)})}}},{key:"handleResults",value:function(e,t){var n=void 0;n=e?{min:e[0],max:e[1]}:t;var r={from:n.min,to:n.max},a={key:this.props.componentId,value:r};this.props.onValueChange&&this.props.onValueChange(a.value),S.selectedSensor.set(a,!0),this.setState({currentValues:n,values:n})}},{key:"render",value:function(){var e=null,t=null,n={};if(this.props.title&&(e=u.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title)),this.state.counts&&this.state.counts.length&&this.props.showHistogram&&(t=u.a.createElement(m.a,{data:this.state.counts})),this.props.rangeLabels.start||this.props.rangeLabels.end){var a;a={},r(a,this.state.startThreshold,this.props.rangeLabels.start),r(a,this.state.endThreshold,this.props.rangeLabels.end),n=a}var s=f()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-labels-active":this.props.rangeLabels.start||this.props.rangeLabels.end,"rbc-labels-inactive":!this.props.rangeLabels.start&&!this.props.rangeLabels.end,"rbc-initialloader-active":this.props.initialLoader,"rbc-initialloader-inactive":!this.props.initialLoader});return u.a.createElement("div",{className:"rbc rbc-rangeslider card thumbnail col s12 col-xs-12 "+s,style:this.props.componentStyle},e,t,u.a.createElement("div",{className:"rbc-rangeslider-container col s12 col-xs-12"},u.a.createElement(h.a,{range:!0,value:[this.state.values.min,this.state.values.max],min:this.state.startThreshold,max:this.state.endThreshold,onChange:this.handleResults,step:this.props.stepValue,marks:n})),this.props.initialLoader&&this.state.queryStart?u.a.createElement(v.a,{defaultText:this.props.initialLoader}):null)}}]),t}(p.Component);t.a=T,T.propTypes={componentId:u.a.PropTypes.string.isRequired,appbaseField:u.a.PropTypes.string.isRequired,title:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),range:u.a.PropTypes.shape({start:S.validateThreshold,end:S.validateThreshold}),rangeLabels:u.a.PropTypes.shape({start:u.a.PropTypes.string,end:u.a.PropTypes.string}),defaultSelected:u.a.PropTypes.shape({start:u.a.PropTypes.number,end:u.a.PropTypes.number}),stepValue:S.stepValidation,showHistogram:u.a.PropTypes.bool,customQuery:u.a.PropTypes.func,initialLoader:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),react:u.a.PropTypes.object,onValueChange:u.a.PropTypes.func,componentStyle:u.a.PropTypes.object,interval:u.a.PropTypes.number},T.defaultProps={title:null,range:{start:0,end:10},rangeLabels:{start:"",end:""},defaultSelected:{start:0,end:10},stepValue:1,showHistogram:!0,componentStyle:{}},T.contextTypes={appbaseRef:u.a.PropTypes.any.isRequired,type:u.a.PropTypes.any.isRequired},T.types={componentId:b.STRING,appbaseField:b.STRING,appbaseFieldType:b.NUMBER,title:b.STRING,react:b.OBJECT,range:b.OBJECT,rangeLabels:b.OBJECT,defaultSelected:b.OBJECT,stepValue:b.NUMBER,showHistogram:b.BOOLEAN,customQuery:b.FUNCTION,initialLoader:b.OBJECT,componentStyle:b.OBJECT,interval:b.NUMBER}},function(e,t,n){"use strict";function r(e){return s.a.createElement(o.a,l({},e,{multipleSelect:!1}))}var a=n(0),s=n.n(a),o=n(21),i=n(2);t.a=r;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.propTypes={defaultSelected:s.a.PropTypes.string,componentStyle:s.a.PropTypes.object},r.types={componentId:i.STRING,appbaseField:i.STRING,appbaseFieldType:i.KEYWORD,title:i.STRING,react:i.OBJECT,defaultSelected:i.ARRAY,showCount:i.STRING,size:i.NUMBER,sortBy:i.STRING,placeholder:i.STRING,selectAllLabel:i.STRING,customQuery:i.FUNCTION,initialLoader:i.OBJECT,componentStyle:i.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(3),u=n.n(p),c=n(10),h=n.n(c),d=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),m=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:null},n.type="range",n.defaultSelected=n.props.defaultSelected,n.handleChange=n.handleChange.bind(n),n.customQuery=n.customQuery.bind(n),n}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setQueryInfo(),this.defaultSelected){var t=this.props.data.filter(function(t){return t.label===e.defaultSelected});t&&t.length&&setTimeout(this.handleChange.bind(this,t[0]),1e3)}}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(e.defaultSelected!==e.props.defaultSelected){e.defaultSelected=e.props.defaultSelected;var t=e.props.data.filter(function(t){return t.label===e.defaultSelected});t&&t.length&&setTimeout(e.handleChange.bind(e,t[0]),1e3)}},300)}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};y.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){if(e)return{range:r({},this.props.appbaseField,{gte:e.start,lte:e.end,boost:2})}}},{key:"handleChange",value:function(e){this.setState({selected:e});var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),y.selectedSensor.set(t,!0)}},{key:"render",value:function(){var e=null;this.props.title&&(e=l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=u()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder});return l.a.createElement("div",{className:"rbc rbc-singledropdownrange col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},l.a.createElement("div",{className:"row"},e,l.a.createElement("div",{className:"col s12 col-xs-12"},l.a.createElement(h.a,{options:this.props.data,clearable:!1,value:this.state.selected,onChange:this.handleChange,placeholder:this.props.placeholder,searchable:!0}))))}}]),t}(i.Component);t.a=m,m.propTypes={componentId:l.a.PropTypes.string.isRequired,appbaseField:l.a.PropTypes.string.isRequired,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),placeholder:l.a.PropTypes.string,data:l.a.PropTypes.any.isRequired,defaultSelected:l.a.PropTypes.string,customQuery:l.a.PropTypes.func,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object},m.defaultProps={componentStyle:{}},m.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired},m.types={componentId:d.STRING,appbaseField:d.STRING,appbaseFieldType:d.NUMBER,data:d.OBJECT,defaultSelected:d.STRING,title:d.STRING,placeholder:d.STRING,customQuery:d.FUNCTION,componentStyle:d.OBJECT}},function(e,t,n){"use strict";function r(e){return s.a.createElement(o.a,l({},e,{multipleSelect:!1}))}var a=n(0),s=n.n(a),o=n(22),i=n(2);t.a=r;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.propTypes={componentId:s.a.PropTypes.string.isRequired,appbaseField:s.a.PropTypes.string.isRequired,title:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element]),defaultSelected:s.a.PropTypes.string,size:s.a.PropTypes.number,showCount:s.a.PropTypes.bool,sortBy:s.a.PropTypes.string,showSearch:s.a.PropTypes.bool,placeholder:s.a.PropTypes.string,customQuery:s.a.PropTypes.func,initialLoader:s.a.PropTypes.oneOfType([s.a.PropTypes.string,s.a.PropTypes.element]),react:s.a.PropTypes.object,componentStyle:s.a.PropTypes.object},r.defaultProps={showCount:!0,sort:"count",size:100,showSearch:!1,title:null,placeholder:"Search",componentStyle:{}},r.contextTypes={appbaseRef:s.a.PropTypes.any.isRequired,type:s.a.PropTypes.any.isRequired},r.types={componentId:i.STRING,appbaseField:i.STRING,appbaseFieldType:i.KEYWORD,react:i.OBJECT,title:i.STRING,defaultSelected:i.STRING,size:i.NUMBER,sortBy:i.STRING,showCount:i.BOOLEAN,showSearch:i.BOOLEAN,placeholder:i.STRING,customQuery:i.FUNCTION,initialLoader:i.OBJECT,componentStyle:i.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(3),u=n.n(p),c=n(2),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={selected:null},r.type="range",r.defaultSelected=r.props.defaultSelected,r.handleChange=r.handleChange.bind(r),r.customQuery=r.customQuery.bind(r),r}return o(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setQueryInfo(),this.defaultSelected){var t=this.props.data.filter(function(t){return t.label===e.defaultSelected});t&&t.length&&setTimeout(this.handleChange.bind(this,t[0]),1e3)}}},{key:"componentWillUpdate",value:function(){var e=this;setTimeout(function(){if(e.defaultSelected!=e.props.defaultSelected){e.defaultSelected=e.props.defaultSelected;var t=e.props.data.filter(function(t){return t.label===e.defaultSelected});t&&t.length&&setTimeout(e.handleChange.bind(e,t[0]),1e3)}},300)}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};d.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){if(e)return{range:r({},this.props.appbaseField,{gte:e.start,lte:e.end,boost:2})}}},{key:"handleChange",value:function(e){this.setState({selected:e});var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),d.selectedSensor.set(t,!0)}},{key:"renderButtons",value:function(){var e=this,t=void 0,n=this.state.selected&&this.state.selected.label?this.state.selected.label:"";return this.props.data&&(t=this.props.data.map(function(t,r){return l.a.createElement("div",{className:"rbc-list-item row",key:r,onClick:function(){return e.handleChange(t)}},l.a.createElement("input",{type:"radio",className:"rbc-radio-item",checked:n===t.label,value:t.label}),l.a.createElement("label",{className:"rbc-label"},t.label))})),t}},{key:"render",value:function(){var e=null;this.props.title&&(e=l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=u()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title});return l.a.createElement("div",{className:"rbc rbc-singlerange col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},l.a.createElement("div",{className:"row"},e,l.a.createElement("div",{className:"col s12 col-xs-12 rbc-list-container"},this.renderButtons())))}}]),t}(i.Component);t.a=f,f.propTypes={componentId:l.a.PropTypes.string.isRequired,appbaseField:l.a.PropTypes.string.isRequired,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),data:l.a.PropTypes.any.isRequired,defaultSelected:l.a.PropTypes.string,customQuery:l.a.PropTypes.func,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object},f.defaultProps={title:null,componentStyle:{}},f.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired},f.types={componentId:c.STRING,appbaseField:c.STRING,appbaseFieldType:c.NUMBER,title:c.STRING,data:c.OBJECT,defaultSelected:c.STRING,customQuery:c.FUNCTION,componentStyle:c.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),l=n.n(i),p=n(3),u=n.n(p),c=n(2),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={currentValue:""},r.type="match",r.handleChange=r.handleChange.bind(r),r.customQuery=r.customQuery.bind(r),r}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.checkDefault()}},{key:"componentWillUpdate",value:function(){this.checkDefault()}},{key:"checkDefault",value:function(){this.props.defaultSelected&&this.defaultSelected!=this.props.defaultSelected&&(this.defaultSelected=this.props.defaultSelected,setTimeout(this.setValue.bind(this,this.defaultSelected),100))}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};d.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){return r({},this.type,r({},this.props.appbaseField,e))}},{key:"handleChange",value:function(e){var t=e.target.value;this.setValue(t)}},{key:"setValue",value:function(e){this.setState({currentValue:e});var t={key:this.props.componentId,value:e};this.props.onValueChange&&this.props.onValueChange(t.value),d.selectedSensor.set(t,!0)}},{key:"render",value:function(){var e=null;this.props.title&&(e=l.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=u()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-placeholder-active":this.props.placeholder,"rbc-placeholder-inactive":!this.props.placeholder});return l.a.createElement("div",{className:"rbc rbc-textfield col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},e,l.a.createElement("div",{className:"rbc-input-container col s12 col-xs-12"},l.a.createElement("input",{className:"rbc-input",type:"text",onChange:this.handleChange,placeholder:this.props.placeholder,value:this.state.currentValue})))}}]),t}(i.Component);t.a=f,f.propTypes={componentId:l.a.PropTypes.string.isRequired,appbaseField:l.a.PropTypes.string,title:l.a.PropTypes.oneOfType([l.a.PropTypes.string,l.a.PropTypes.element]),defaultSelected:l.a.PropTypes.string,placeholder:l.a.PropTypes.string,customQuery:l.a.PropTypes.func,onValueChange:l.a.PropTypes.func,componentStyle:l.a.PropTypes.object},f.defaultProps={componentStyle:{}},f.contextTypes={appbaseRef:l.a.PropTypes.any.isRequired,type:l.a.PropTypes.any.isRequired},f.types={componentId:c.STRING,appbaseField:c.STRING,appbaseFieldType:c.STRING,title:c.STRING,defaultSelected:c.STRING,placeholder:c.STRING,customQuery:c.FUNCTION,componentStyle:c.OBJECT}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),l=n.n(i),p=n(0),u=n.n(p),c=n(3),h=n.n(c),d=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),m=function(e){function t(e,n){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={selected:[]},r.type="term",r.defaultSelected=r.props.defaultSelected,r.handleChange=r.handleChange.bind(r),r.customQuery=r.customQuery.bind(r),r}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setQueryInfo(),this.defaultSelected){this.defaultSelected=l()(this.defaultSelected)?this.defaultSelected:[this.defaultSelected];var t=this.props.data.filter(function(t){return e.defaultSelected.indexOf(t.label)>-1});t&&t.length&&t.forEach(function(t){setTimeout(e.handleChange.bind(e,t),1e3)})}}},{key:"componentWillUpdate",value:function(){var e=this;if(this.defaultSelected!=this.props.defaultSelected){this.defaultSelected=this.props.defaultSelected,this.defaultSelected=l()(this.defaultSelected)?this.defaultSelected:[this.defaultSelected];var t=this.props.data.filter(function(t){return e.defaultSelected.indexOf(t.label)>-1});t&&t.length&&t.forEach(function(t){setTimeout(e.handleChange.bind(e,t),1e3)})}}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:{queryType:this.type,inputData:this.props.appbaseField,customQuery:this.props.customQuery?this.props.customQuery:this.customQuery}};y.selectedSensor.setSensorInfo(e)}},{key:"customQuery",value:function(e){var t=null;return e&&e.length?t={bool:{should:function(t){return e.map(function(e,n){return{term:r({},t,e.value)}})}(this.props.appbaseField),minimum_should_match:1,boost:1}}:t}},{key:"handleChange",value:function(e){var t=this.state.selected,n=[],r=null;t.forEach(function(n,a){e.label===n.label&&(r=a,t.splice(a,1))}),null===r?this.props.multiSelect?(t.push(e),n=t):n.push(e):n=t,this.setState({selected:n});var a={key:this.props.componentId,value:n};this.props.onValueChange&&this.props.onValueChange(a.value),y.selectedSensor.set(a,!0)}},{key:"renderButtons",value:function(){var e=this,t=void 0,n=this.state.selected.map(function(e){return e.label});return this.props.data&&(t=this.props.data.map(function(t,r){return u.a.createElement("button",{key:r,className:"btn rbc-btn "+(n.indexOf(t.label)>-1?"rbc-btn-active":"rbc-btn-inactive"),onClick:function(){return e.handleChange(t)},title:t.title?t.title:t.label},t.label)})),t}},{key:"render",value:function(){var e=null;this.props.title&&(e=u.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=h()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title,"rbc-multiselect-active":this.props.multiSelect,"rbc-multiselect-inactive":!this.props.multiSelect});return u.a.createElement("div",{className:"rbc rbc-togglebutton col s12 col-xs-12 card thumbnail "+t,style:this.props.componentStyle},u.a.createElement("div",{className:"row"},e,u.a.createElement("div",{className:"rbc-buttongroup col s12 col-xs-12"},this.renderButtons())))}}]),t}(p.Component);t.a=m,m.propTypes={componentId:u.a.PropTypes.string.isRequired,appbaseField:u.a.PropTypes.string.isRequired,title:u.a.PropTypes.oneOfType([u.a.PropTypes.string,u.a.PropTypes.element]),data:u.a.PropTypes.any.isRequired,defaultSelected:u.a.PropTypes.oneOfType([u.a.PropTypes.array,u.a.PropTypes.string]),multiSelect:u.a.PropTypes.bool,customQuery:u.a.PropTypes.func,onValueChange:u.a.PropTypes.func,componentStyle:u.a.PropTypes.object},m.defaultProps={multiSelect:!0,componentStyle:{}},m.contextTypes={appbaseRef:u.a.PropTypes.any.isRequired,type:u.a.PropTypes.any.isRequired},m.types={componentId:d.STRING,appbaseField:d.STRING,appbaseFieldType:d.KEYWORD,title:d.STRING,data:d.OBJECT,defaultSelected:d.ARRAY,multiSelect:d.BOOLEAN,customQuery:d.FUNCTION,componentStyle:d.OBJECT}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(128),i=n.n(o),l=n(0),p=n.n(l);n.d(t,"a",function(){return c});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.style={barContainer:{position:"relative",height:"50px",width:"100%"}},n}return s(t,e),u(t,[{key:"createBars",value:function(){var e=i()(this.props.data),t=this.props.data.length,n=null,r=this.props.data.map(function(n){var r={height:0,count:0,width:100/t};try{r.height=100*n/e,r.count=n,r.width=100/t}catch(e){console.log(e)}return r});return t&&(n=r.map(function(e,t){return p.a.createElement(h,{key:t,element:e})})),n}},{key:"render",value:function(){var e=this.createBars();return p.a.createElement("div",{className:"rbc-bar-container col s12 col-xs-12",style:this.style.barContainer},e)}}]),t}(l.Component),h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.style={bar:{display:"block",width:"100%",height:"100%"}},n}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props.element,t={height:e.height+"%",width:e.width+"%",display:"inline-block",background:"#efefef",position:"relative"};return p.a.createElement("span",{className:"rbc-bar-item",style:t},p.a.createElement("span",{className:"bar",style:this.style.bar,title:e.count}))}}]),t}(l.Component)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=n(67),p=n(70),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedItems:[]},n.refStore={},n.handleListClick=n.handleListClick.bind(n),n.handleTagClick=n.handleTagClick.bind(n),n.handleListClickAll=n.handleListClickAll.bind(n),n.clearAll=n.clearAll.bind(n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.defaultSelected&&this.defaultUpdate()}},{key:"defaultUpdate",value:function(){var e=this;this.props.defaultSelected.indexOf(this.props.selectAllLabel)>-1?this.setDefaultSelectAll():this.setState({selectedItems:this.props.defaultSelected,defaultSelectall:this.props.defaultSelectall},function(){e.updateAction.bind(e),e.props.onSelect(e.state.selectedItems)})}},{key:"setDefaultSelectAll",value:function(){this.props.items&&this.props.items.length?setTimeout(this.handleListClickAll.bind(this,this.props.selectAllLabel,!0),1e3):setTimeout(this.setDefaultSelectAll.bind(this),1e3)}},{key:"componentDidUpdate",value:function(){var e=this,t=null,n=!0;this.state.selectedItems&&(t=JSON.parse(JSON.stringify(this.state.selectedItems))),t&&t.length&&this.props.items&&this.props.items.length&&(t=t.filter(function(t){return!!e.props.items.filter(function(e){return e.key===t}).length}),t.length!==this.state.selectedItems.length&&(n=!t.length,this.props.onRemove(this.state.selectedItems,n),this.updateSelectedItems(t),t.length&&this.props.onSelect(t)))}},{key:"handleListClick",value:function(e,t){var n=void 0;t?(this.props.onRemove(this.state.selectedItems,!1),n=this.state.selectedItems,n.push(e),this.setState({selectedItems:n},this.updateAction.bind(this)),this.state.selectedItems.length&&this.props.onSelect(this.state.selectedItems)):this.handleTagClick(e)}},{key:"handleTagClick",value:function(e){var t=1===this.state.selectedItems.length;this.props.onRemove(this.state.selectedItems,t);var n=e.toString().replace(/ /g,"_"),r="ref"+n;this.refStore[r].state.status=!1;var a=this.state.selectedItems,s=a.indexOf(e);a.splice(s,1),this.setState({selectedItems:a},this.updateAction.bind(this)),this.props.onSelect(a)}},{key:"clearAll",value:function(){this.handleListClickAll(this.props.selectAllLabel,!1)}},{key:"getSelectedItems",value:function(){var e=[];return this.props.items.forEach(function(t){t.status&&e.indexOf(t.key)<0&&e.push(t.key)}),e}},{key:"handleListClickAll",value:function(e,t){var n=this;this.props.selectAll(t);var r=this.props.items.map(function(e){return e.key});r=t?r:[],this.setState({defaultSelectall:t,selectedItems:r},function(){n.updateAction.bind(n),n.props.onSelect(n.state.selectedItems,r)})}},{key:"updateSelectedItems",value:function(e){this.setState({selectedItems:e})}},{key:"updateAction",value:function(){this.state.selectedItems.length||this.props.onSelect(null)}},{key:"render",value:function(){var e=this,t=this.props.items,n=this.getSelectedItems(),r=[],a=[];return t.forEach(function(t,n){try{t.keyRef=t.key.replace(/ /g,"_")}catch(e){t.keyRef=n}var a=!("visible"in t&&!t.visible);r.push(i.a.createElement(l.a,{key:t.keyRef,value:t.key,doc_count:t.doc_count,countField:e.props.showCount,handleClick:e.handleListClick,visible:a,status:t.status||!1,ref:function(n){var r="ref"+t.keyRef;e.refStore[r]=n}}))}),this.props.selectAllLabel&&t&&t.length&&r.unshift(i.a.createElement(l.a,{key:"selectall",value:this.props.selectAllLabel,countField:!1,visible:!0,handleClick:this.handleListClickAll,status:this.props.selectAllValue,ref:function(t){e.refStore.refselectall=t}})),this.props.showTags&&n&&(n.length<=5?n.forEach(function(t){a.push(i.a.createElement(p.a,{key:t,value:t,onClick:e.handleTagClick}))}):a.unshift(i.a.createElement(p.a,{key:"Clear All",value:"Clear All",onClick:this.clearAll}))),i.a.createElement("div",{className:"rbc-list-container col s12 col-xs-12"},a.length?i.a.createElement("div",{className:"row rbc-tag-container"},a):null,i.a.createElement("div",{className:"row"},r))}}]),t}(o.Component);t.a=c,c.propTypes={defaultSelected:i.a.PropTypes.array,items:i.a.PropTypes.array,onRemove:i.a.PropTypes.func,onSelect:i.a.PropTypes.func,selectAll:i.a.PropTypes.func,selectAllLabel:i.a.PropTypes.string,selectAllValue:i.a.PropTypes.bool,showCount:i.a.PropTypes.bool,showTags:i.a.PropTypes.bool,defaultSelectall:i.a.PropTypes.bool},c.defaultProps={showTags:!0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=n(3),p=n.n(l),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedItem:[]},n.defaultSelected=n.props.defaultSelected,n.defaultAllowed=!0,n.handleClick=n.handleClick.bind(n),n.handleListClickAll=n.handleListClickAll.bind(n),n}return s(t,e),u(t,[{key:"componentWillUpdate",value:function(){this.defaultSelected!=this.props.defaultSelected&&(this.defaultSelected=this.props.defaultSelected,this.defaultSelection())}},{key:"componentDidUpdate",value:function(){this.props.items.length&&this.defaultAllowed&&(this.defaultAllowed=!1,this.defaultSelection())}},{key:"defaultSelection",value:function(){this.props.defaultSelected&&(this.props.defaultSelected===this.props.selectAllLabel?this.handleListClickAll(this.props.selectAllLabel):this.handleClick(this.props.defaultSelected))}},{key:"handleListClickAll",value:function(e){var t=this,n=this.props.items.map(function(e){return e.key});this.props.selectAll(e,n),this.setState({selectedItem:e},function(){t.props.onSelect(n,e)})}},{key:"handleClick",value:function(e){this.props.onRemove(this.state.selectedItem),this.props.onSelect(e),this.setState({selectedItem:e})}},{key:"renderItemsComponent",value:function(){var e=this,t=this.props.items,n=[];return t.forEach(function(t){var r=!t.hasOwnProperty("visible")||!!t.visible;n.push(i.a.createElement(h,{key:t.key,value:t.key,doc_count:t.doc_count,countField:e.props.showCount,handleClick:e.handleClick,visible:r,selectedItem:e.state.selectedItem}))}),this.props.selectAllLabel&&t&&t.length&&n.unshift(i.a.createElement(h,{key:"selectall",visible:!0,value:this.props.selectAllLabel,countField:!1,handleClick:this.handleListClickAll,selectedItem:this.state.selectedItem,ref:"refselectall"})),n}},{key:"render",value:function(){return i.a.createElement("div",{className:"rbc-list-container col s12 col-xs-12"},this.renderItemsComponent())}}]),t}(o.Component);t.a=c;var h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),u(t,[{key:"renderItem",value:function(){var e=void 0;this.props.countField&&(e=i.a.createElement("span",{className:"rbc-count"}," (",this.props.doc_count,") "));var t=i.a.createElement("a",{href:"javascript:void(0)",className:"col s12 col-xs-12"},i.a.createElement("span",null," ",this.props.value," "),e);return this.props.value===this.props.selectedItem&&(t=i.a.createElement("a",{href:"javascript:void(0)",className:"col s12 col-xs-12"},i.a.createElement("strong",null,i.a.createElement("span",null," ",this.props.value," "),e))),t}},{key:"renderCount",value:function(){var e=void 0;return this.props.countField&&(e=i.a.createElement("span",{className:"rbc-count"}," ",this.props.doc_count," ")),e}},{key:"render",value:function(){var e=this,t=p()({"rbc-count-active":this.props.countField,"rbc-count-inactive":!this.props.countField,"rbc-item-show":this.props.visible,"rbc-item-hide":!this.props.visible});return i.a.createElement("div",{className:"rbc-list-item row "+t,onClick:function(){return e.props.handleClick(e.props.value)}},i.a.createElement("input",{type:"radio",className:"rbc-radio-item",checked:this.props.value===this.props.selectedItem,value:this.props.value}),i.a.createElement("label",{className:"rbc-label"},this.props.value," ",this.renderCount()))}}]),t}(o.Component)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=null;return t=this.state.open?JSON.stringify(this.props.data,null,2):JSON.stringify(this.props.data),i.a.createElement("div",{className:"row rbc-json-print"},i.a.createElement("span",{className:"head "+(this.state.open?null:"collapsed"),onClick:function(){return e.setState({open:!e.state.open})}},"Object"),i.a.createElement("pre",null,t))}}]),t}(o.Component);t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=n(3),p=n.n(l),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={initialStatus:n.props.status,status:n.props.status||!1},n.handleCheckboxChange=n.handleCheckboxChange.bind(n),n}return s(t,e),u(t,[{key:"componentDidUpdate",value:function(){this.props.status!==this.state.initialStatus&&this.setState({status:this.props.status,initialStatus:this.props.status})}},{key:"handleClick",value:function(){this.setState({status:!this.state.status}),this.props.handleClick(this.props.value,!this.state.status)}},{key:"handleCheckboxChange",value:function(e){this.setState({status:e.target.checked})}},{key:"render",value:function(){var e=void 0;this.props.countField&&(e=i.a.createElement("span",{className:"rbc-count"}," ",this.props.doc_count," "));var t=p()({"rbc-count-active":this.props.countField,"rbc-count-inactive":!this.props.countField});return i.a.createElement("div",{onClick:this.handleClick.bind(this),className:"rbc-list-item row "+t},i.a.createElement("input",{type:"checkbox",className:"rbc-checkbox-item",checked:this.state.status,onChange:this.handleCheckboxChange}),i.a.createElement("label",{className:"rbc-label"},this.props.value," ",e))}}]),t}(o.Component);t.a=c,c.propTypes={status:i.a.PropTypes.bool,handleClick:i.a.PropTypes.func,value:i.a.PropTypes.string,countField:i.a.PropTypes.bool,doc_count:i.a.PropTypes.number}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o),l=n(3),p=n.n(l),u=n(5),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),d=function(e){function t(e,n){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.state={currentValue:1,maxPageNumber:1},s.handleChange=s.handleChange.bind(s),s.prePage=s.prePage.bind(s),s.nextPage=s.nextPage.bind(s),s.firstPage=s.firstPage.bind(s),s.lastPage=s.lastPage.bind(s),s}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.setQueryInfo(),this.listenGlobal()}},{key:"componentWillUnmount",value:function(){this.globalListener&&this.globalListener.remove()}},{key:"setQueryInfo",value:function(){var e={key:this.props.componentId,value:this.state.currentValue};h.selectedSensor.setPaginationInfo(e)}},{key:"listenGlobal",value:function(){var e=this;this.globalListener=u.a.emitter.addListener("global",function(t){if(t.react&&Object.keys(t.react).indexOf(e.props.componentId)>-1){var n=t.channelResponse&&t.channelResponse.data&&t.channelResponse.data.hits?t.channelResponse.data.hits.total:0,r=Math.ceil(n/t.queryOptions.size)<1?1:Math.ceil(n/t.queryOptions.size),a=t.queryOptions.size?t.queryOptions.size:20,s=Math.round(t.queryOptions.from/a)+1;e.setState({totalHits:n,size:a,maxPageNumber:r,currentValue:s})}})}},{key:"handleChange",value:function(e){this.setState({currentValue:e});var t={key:this.props.componentId,value:e};h.selectedSensor.set(t,!0,"paginationChange"),this.props.onPageChange&&this.props.onPageChange(e)}},{key:"firstPage",value:function(){1!==this.state.currentValue&&this.handleChange.call(this,1)}},{key:"lastPage",value:function(){this.state.currentValue!==this.state.maxPageNumber&&this.handleChange.call(this,this.state.maxPageNumber)}},{key:"prePage",value:function(){var e=this.state.currentValue>1?this.state.currentValue-1:1;this.state.currentValue!==e&&this.handleChange.call(this,e)}},{key:"nextPage",value:function(){var e=this.state.currentValue<this.state.maxPageNumber?this.state.currentValue+1:this.state.maxPageNumber;this.state.currentValue!==e&&this.handleChange.call(this,e)}},{key:"renderPageNumber",value:function(){for(var e=this,t=void 0,n=[],r=this.state.currentValue;r>0;r--)if(r%5==0||1===r){t=r;break}for(var a=t;a<=t+5;a++)!function(t){var r=i.a.createElement("li",{key:t,className:"rbc-page-number "+(e.state.currentValue===t?"active rbc-pagination-active":"waves-effect")},i.a.createElement("a",{onClick:function(){return e.handleChange(t)}},t));t<=e.state.maxPageNumber&&n.push(r)}(a);return i.a.createElement("ul",{className:"pagination"},i.a.createElement("li",{className:1===this.state.currentValue?"disabled":"waves-effect"},i.a.createElement("a",{className:"rbc-page-previous",onClick:this.firstPage},i.a.createElement("i",{className:"fa fa-angle-double-left"}))),i.a.createElement("li",{className:1===this.state.currentValue?"disabled":"waves-effect"},i.a.createElement("a",{className:"rbc-page-previous",onClick:this.prePage},i.a.createElement("i",{className:"fa fa-angle-left"}))),n,i.a.createElement("li",{className:this.state.currentValue===this.state.maxPageNumber?"disabled":"waves-effect"},i.a.createElement("a",{className:"rbc-page-next",onClick:this.nextPage},i.a.createElement("i",{className:"fa fa-angle-right"}))),i.a.createElement("li",{className:this.state.currentValue===this.state.maxPageNumber?"disabled":"waves-effect"},i.a.createElement("a",{className:"rbc-page-previous",onClick:this.lastPage},i.a.createElement("i",{className:"fa fa-angle-double-right"}))))}},{key:"render",value:function(){var e=null;this.props.title&&(e=i.a.createElement("h4",{className:"rbc-title col s12 col-xs-12"},this.props.title));var t=p()({"rbc-title-active":this.props.title,"rbc-title-inactive":!this.props.title});return i.a.createElement("div",{className:"rbc rbc-pagination col s12 col-xs-12 "+t+" "+this.props.className},e,i.a.createElement("div",{className:"col s12 col-xs-12"},this.renderPageNumber()))}}]),t}(o.Component);t.a=d,d.propTypes={componentId:i.a.PropTypes.string.isRequired,title:i.a.PropTypes.string,onPageChange:i.a.PropTypes.func},d.defaultProps={},d.contextTypes={appbaseRef:i.a.PropTypes.any.isRequired,type:i.a.PropTypes.any.isRequired}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),i=n.n(o);n.d(t,"a",function(){return p});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchValue:""},n.handleChange=n.handleChange.bind(n),n}return s(t,e),l(t,[{key:"handleChange",value:function(e){var t=this,n=e.target.value;this.setState({searchValue:n},function(){t.props.changeCallback(t.state.searchValue)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"rbc-search-container col s12 col-xs-12"},i.a.createElement("input",{type:"text",className:"rbc-input col s12 col-xs-12 form-control",value:this.state.searchValue,placeholder:this.props.placeholder,onChange:this.handleChange}))}}]),t}(o.Component)},function(e,t,n){"use strict";function r(e){return s.a.createElement("span",{onClick:function(){return e.onClick(e.value)},className:"rbc-tag-item col"},s.a.createElement("a",{href:"javascript:void(0)",className:"close"},"×"),s.a.createElement("span",null,e.value))}var a=n(0),s=n.n(a);t.a=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(58),a=n(52),s=n(56),o=n(50),i=n(55),l=n(60),p=n(47),u=n(59),c=n(53),h=n(57),d=n(51),f=n(61),y=n(48),m=n(49),v=n(54),b=n(44),g=n(43),S=n(13),T=n(46),P=n(6),O=n(11),k=n(12),C=n(45),w=n(5),I=n(2),E=n(1);e.exports={SingleList:r.a,MultiList:a.a,SingleDropdownList:s.a,MultiDropdownList:o.a,RangeSlider:i.a,TextField:l.a,DataSearch:p.a,SingleRange:u.a,MultiRange:c.a,SingleDropdownRange:h.a,MultiDropdownRange:d.a,ToggleButton:f.a,DatePicker:y.a,DateRange:m.a,NumberBox:v.a,ReactiveBase:C.a,ReactiveList:b.a,ReactiveElement:g.a,AppbaseChannelManager:w.a,AppbaseSensorHelper:E,PoweredBy:S.a,DataController:T.a,TYPES:I,InitialLoader:P.a,NoResults:O.a,ResultStats:k.a}}).call(t,n(62)(e))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return s});var a=n(1),s=function(e,t){function n(e){return a.selectedSensor.get(e,"sortInfo")}function s(e){var t=null,n=a.selectedSensor.get(e,"sensorInfo");return n&&n.externalQuery&&(t=n.externalQuery),t}function o(e){var n=a.selectedSensor.get(e,"sensorInfo"),r=null;return n&&n.customQuery?r=n.customQuery(t[e]):t[e]&&(r={},r[n.queryType]={},"match_all"!==n.queryType&&(r[n.queryType][n.inputData]=t[e])),r}function i(t){var a=e.react[t],s=void 0,o=void 0,i=void 0;if(a.customQuery)i=a.customQuery(a);else{if(a.sortRef){var l=n(a.sortRef);l&&l.aggSort&&(a.sort=l.aggSort)}"count"===a.sort?(s="desc",o="_count"):"asc"!==a.sort&&"desc"!==a.sort||(s=a.sort,o="_term"),i=r({},a.key,{terms:{field:a.key}}),a.size&&(i[a.key].terms.size=a.size),a.sort&&(i[a.key].terms.order=r({},o,s))}return i}function l(){var r={};return e.serializeDepends.dependsList.forEach(function(e){if("aggs"===e)r[e]=i(e);else if(e&&e.indexOf("channel-options-")>-1)c=c||{},c=Object.assign(c,t[e]);else{r[e]=o(e);var a=s(e);a&&(c=c||{},c=Object.assign(c,a))}var l=n(e);!l||"aggSort"in l||u.push(l)}),r}function p(t){var n=a.serializeDepends.createQuery(e.serializeDepends,t);return n&&n.body?(u&&u.length&&(n.body.sort=u),c&&Object.keys(c).length&&Object.keys(c).forEach(function(e){n.body[e]=c[e]})):n={},n}var u=[],c=null;return function(){return p(l())}()}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return c});var r=n(20),a=function(){var e=function(e){return e.height()?e.height():0},t=function(){var t=r(window).height(),n=t-15;r(".rbc.rbc-reactivelist, .rbc.rbc-reactiveelement").css({maxHeight:n}),[r(".rbc.rbc-singlelist"),r(".rbc.rbc-multilist"),r(".rbc.rbc-nestedlist"),r(".rbc.rbc-tagcloud")].forEach(function(n){if(n.length){var r=e(n.find(".rbc-title"))+e(n.find(".rbc-search-container"));n.find(".rbc-list-container").css({maxHeight:t-r-35})}}),r(".rbc-base > .row").css({"margin-bottom":0}),r(".rbc-reactivemap .rbc-container").css({maxHeight:t})};t(),r(window).resize(function(){t()})},s=function(e,t){var n=null;return(e[t]<1||e[t]>1e3)&&(n=new Error("Size value is invalid, it should be between 1 and 1000.")),n},o=function(e,t){var n=null;return e[t]>Math.floor((e.range.end-e.range.start)/2)?n=new Error("Step value is invalid, it should be less than or equal to "+Math.floor((e.range.end-e.range.start)/2)+"."):e[t]<=0&&(n=new Error("Step value is invalid, it should be greater than 0.")),n},i=function(e,t,n){var r=null;return!isNaN(e[t])&&e.end>e.start||(r=new Error("Threshold value validation has failed, end value should be greater than start value.")),"GeoDistanceDropdown"!==n&&"GeoDistanceSlider"!==n||e.start<=0&&(r=new Error("Threshold value is invalid, it should be greater than 0.")),r},l=function(e,t){var n=null,r=e.data.end?e.data.end:e.defaultSelected,a=e.data.start?e.data.start:e.defaultSelected;return!isNaN(e[t])&&r>=e.defaultSelected&&a<=e.defaultSelected||(n=new Error("Default value validation has failed, Default value should be between start and end values.")),n},p={resultListFrom:function(e,t){var n=null;return e[t]<0&&(n=new Error("From value is invalid, it should be greater than or equal to 0.")),n}},u=function(e,t){var n=null;return e.credentials||(n=new Error("ReactiveBase expects credentials as a prop instead of username:password.")),n},c={epoch_millis:"x",epoch_seconds:"X",date:"YYYY-MM-DD",date_time:"YYYY-MM-DDTHH:mm:ss.SSSZZ",date_time_no_millis:"YYYY-MM-DDTHH:mm:ssZZ",basic_date:"YYYYMMDD",basic_date_time:"YYYYMMDDTHHmmss.SSSZ",basic_date_time_no_millis:"YYYYMMDDTHHmmssZ",basic_time:"HHmmss.SSSZ",basic_time_no_millis:"HHmmssZ"}},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&a(e,t,0)>-1}var a=n(26);e.exports=r},function(e,t){function n(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n){var r=e[t];i.call(e,t)&&s(r,n)&&(void 0!==n||t in e)||a(e,t,n)}var a=n(79),s=n(34),o=Object.prototype,i=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&a?a(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var a=n(105);e.exports=r},function(e,t,n){var r=n(83),a=n(102),s=a(r);e.exports=s},function(e,t,n){function r(e,t,n){for(var r=-1,s=e.length;++r<s;){var o=e[r],i=t(o);if(null!=i&&(void 0===l?i===i&&!a(i):n(i,l)))var l=i,p=o}return p}var a=n(19);e.exports=r},function(e,t,n){var r=n(103),a=r();e.exports=a},function(e,t,n){function r(e,t){return e&&a(e,t,s)}var a=n(82),s=n(38);e.exports=r},function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},function(e,t){function n(e,t){return e>t}e.exports=n},function(e,t){function n(e,t){return null!=e&&a.call(e,t)}var r=Object.prototype,a=r.hasOwnProperty;e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n,r,m,b){var g=p(e),S=p(t),T=g?f:l(e),P=S?f:l(t);T=T==d?y:T,P=P==d?y:P;var O=T==y,k=P==y,C=T==P;if(C&&u(e)){if(!u(t))return!1;g=!0,O=!1}if(C&&!O)return b||(b=new a),g||c(e)?s(e,t,n,r,m,b):o(e,t,T,n,r,m,b);if(!(n&h)){var w=O&&v.call(e,"__wrapped__"),I=k&&v.call(t,"__wrapped__");if(w||I){var E=w?e.value():e,R=I?t.value():t;return b||(b=new a),m(E,R,n,r,b)}}return!!C&&(b||(b=new a),i(e,t,n,r,m,b))}var a=n(24),s=n(106),o=n(107),i=n(108),l=n(112),p=n(4),u=n(124),c=n(127),h=1,d="[object Arguments]",f="[object Array]",y="[object Object]",m=Object.prototype,v=m.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){var l=n.length,p=l,u=!r;if(null==e)return!p;for(e=Object(e);l--;){var c=n[l];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++l<p;){c=n[l];var h=c[0],d=e[h],f=c[1];if(u&&c[2]){if(void 0===d&&!(h in e))return!1}else{var y=new a;if(r)var m=r(d,f,h,e,t,y);if(!(void 0===m?s(f,d,o|i,r,y):m))return!1}}return!0}var a=n(24),s=n(14),o=1,i=2;e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=s(e)?Array(e.length):[];return a(e,function(e,a,s){r[++n]=t(e,a,s)}),r}var a=n(80),s=n(36);e.exports=r},function(e,t,n){function r(e){var t=s(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||a(n,e,t)}}var a=n(89),s=n(110),o=n(32);e.exports=r},function(e,t,n){function r(e,t){return i(e)&&l(t)?p(u(e),t):function(n){var r=s(n,e);return void 0===r&&r===t?o(n,e):a(t,r,c|h)}}var a=n(14),s=n(35),o=n(122),i=n(16),l=n(31),p=n(32),u=n(7),c=1,h=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=-1;t=a(t.length?t:[u],l(s));var c=o(e,function(e,n,s){return{criteria:a(t,function(t){return t(e)}),index:++r,value:e}});return i(c,function(e,t){return p(e,t,n)})}var a=n(76),s=n(27),o=n(90),i=n(97),l=n(98),p=n(101),u=n(17);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return a(t,e)}}var a=n(25);e.exports=r},function(e,t,n){function r(e,t,n,r){if(!i(e))return e;t=s(t,e);for(var p=-1,u=t.length,c=u-1,h=e;null!=h&&++p<u;){var d=l(t[p]),f=n;if(p!=c){var y=h[d];void 0===(f=r?r(y,d,h):void 0)&&(f=i(y)?y:o(t[p+1])?[]:{})}a(h,d,f),h=h[d]}return e}var a=n(78),s=n(15),o=n(30),i=n(18),l=n(7);e.exports=r},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e,t,n){var r=-1,c=s,h=e.length,d=!0,f=[],y=f;if(n)d=!1,c=o;else if(h>=u){var m=t?null:l(e);if(m)return p(m);d=!1,c=i,y=new a}else y=t?[]:f;e:for(;++r<h;){var v=e[r],b=t?t(v):v;if(v=n||0!==v?v:0,d&&b===b){for(var g=y.length;g--;)if(y[g]===b)continue e;t&&y.push(b),f.push(v)}else c(y,b,n)||(y!==f&&y.push(b),f.push(v))}return f}var a=n(23),s=n(74),o=n(75),i=n(28),l=n(104),p=n(119),u=200;e.exports=r},function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,s=e===e,o=a(e),i=void 0!==t,l=null===t,p=t===t,u=a(t);if(!l&&!u&&!o&&e>t||o&&i&&p&&!l&&!u||r&&i&&p||!n&&p||!s)return 1;if(!r&&!o&&!u&&e<t||u&&n&&s&&!r&&!o||l&&n&&s||!i&&s||!p)return-1}return 0}var a=n(19);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,s=e.criteria,o=t.criteria,i=s.length,l=n.length;++r<i;){var p=a(s[r],o[r]);if(p)return r>=l?p:p*("desc"==n[r]?-1:1)}return e.index-t.index}var a=n(100);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!a(n))return e(n,r);for(var s=n.length,o=t?s:-1,i=Object(n);(t?o--:++o<s)&&!1!==r(i[o],o,i););return n}}var a=n(36);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),i=o.length;i--;){var l=o[e?i:++a];if(!1===n(s[l],l,s))break}return t}}e.exports=n},function(e,t){function n(){}e.exports=n},function(e,t,n){var r=n(111),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){function r(e,t,n,r,p,u){var c=n&i,h=e.length,d=t.length;if(h!=d&&!(c&&d>h))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var y=-1,m=!0,v=n&l?new a:void 0;for(u.set(e,t),u.set(t,e);++y<h;){var b=e[y],g=t[y];if(r)var S=c?r(g,b,y,t,e,u):r(b,g,y,e,t,u);if(void 0!==S){if(S)continue;m=!1;break}if(v){if(!s(t,function(e,t){if(!o(v,t)&&(b===e||p(b,e,n,r,u)))return v.push(t)})){m=!1;break}}else if(b!==g&&!p(b,g,n,r,u)){m=!1;break}}return u.delete(e),u.delete(t),m}var a=n(23),s=n(77),o=n(28),i=1,l=2;e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n,r,o,l){var p=n&s,u=a(e),c=u.length;if(c!=a(t).length&&!p)return!1;for(var h=c;h--;){var d=u[h];if(!(p?d in t:i.call(t,d)))return!1}var f=l.get(e);if(f&&l.get(t))return f==t;var y=!0;l.set(e,t),l.set(t,e);for(var m=p;++h<c;){d=u[h];var v=e[d],b=t[d];if(r)var g=p?r(b,v,d,t,e,l):r(v,b,d,e,t,l);if(!(void 0===g?v===b||o(v,b,n,r,l):g)){y=!1;break}m||(m="constructor"==d)}if(y&&!m){var S=e.constructor,T=t.constructor;S!=T&&"constructor"in e&&"constructor"in t&&!("function"==typeof S&&S instanceof S&&"function"==typeof T&&T instanceof T)&&(y=!1)}return l.delete(e),l.delete(t),y}var a=n(109),s=1,o=Object.prototype,i=o.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(33),a=r(Object.keys,Object);e.exports=a},function(e,t,n){function r(e){for(var t=s(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,a(o)]}return t}var a=n(31),s=n(38);e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}var a=n(8),s=Array.prototype,o=s.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n(8);e.exports=r},function(e,t,n){function r(e){return a(this.__data__,e)>-1}var a=n(8);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a=n(8);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var r=n(118),a=/^\./,s=r(function(e){var t=[];return a.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,r,a){t.push(r?a.replace(/\\(\\)?/g,"$1"):n||e)}),t});e.exports=s},function(e,t,n){function r(e,t){return null!=e&&s(e,t,a)}var a=n(86),s=n(29);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&s(e,t,a)}var a=n(87),s=n(29);e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){if(!s(e))return!1;var t=a(e);return t==i||t==l||t==o||t==p}var a=n(84),s=n(18),o="[object AsyncFunction]",i="[object Function]",l="[object GeneratorFunction]",p="[object Proxy]";e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){return e&&e.length?a(e,o,s):void 0}var a=n(81),s=n(85),o=n(17);e.exports=r},function(e,t,n){function r(e,t,n,r){return null==e?[]:(s(t)||(t=null==t?[]:[t]),n=r?void 0:n,s(n)||(n=null==n?[]:[n]),a(e,t,n))}var a=n(93),s=n(4);e.exports=r},function(e,t,n){function r(e){return o(e)?a(i(e)):s(e)}var a=n(94),s=n(95),o=n(16),i=n(7);e.exports=r},function(e,t,n){function r(e,t,n){return null==e?e:a(e,t,n)}var a=n(96);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t){return e&&e.length?s(e,a(t,2)):[]}var a=n(27),s=n(99);e.exports=r},function(e,t){e.exports=appbase-js},function(e,t){e.exports=rc-slider}]);